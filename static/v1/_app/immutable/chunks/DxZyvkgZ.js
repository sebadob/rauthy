import{t as b,a as h}from"./DVyqXkF9.js";import{p as ee,a2 as q,G as C,k as p,a1 as te,l as d,a6 as ae,c as n,r as o,t as _,j as a,a5 as E,s as g,a as ie}from"./DXTz3Rbt.js";import{s as F}from"./BLUcFBb0.js";import{i as se}from"./Dnzfvyee.js";import{s as x}from"./B28jQOFH.js";import{p as re}from"./D54UoLP7.js";import{I as G}from"./BuTqw5Ip.js";import{u as ne}from"./pXVVLMtZ.js";import{B as A}from"./BaLU91-Z.js";import{O as oe}from"./sqKkxQfp.js";import{f as le}from"./QS8tP13U.js";const O=20;var de=b('<div class="iconLeft svelte-1eyqa5j"><!></div>'),ue=b('<div class="iconRight svelte-1eyqa5j"><!></div>'),ve=b('<div class="font-label total svelte-1eyqa5j"> </div>'),ce=b('<div class="container svelte-1eyqa5j"><div class="flex"><!> <ul class="svelte-1eyqa5j"><li class="svelte-1eyqa5j"> </li></ul> <!></div> <div class="flex gap-10"><div class="flex gap-05 chunkSize noselect"><div> </div> <div><!></div></div> <!></div></div>');function ze(u,i){ee(i,!0);const M=[5,10,20,30,50,100];let l=re(i,"pageSize",31,()=>q(O)),c=ne();const T="1rem";l(Number.parseInt(i.firstFetchHeaders.get("x-page-size")||O.toString()));let f=p(void 0),j=C(()=>l()),S=p(q(Number.parseInt(i.firstFetchHeaders.get("x-page-count")||"1"))),m=p(q(i.firstFetchHeaders.get("x-continuation-token"))),r=p(1),N=E(()=>a(r)>=a(S));te(()=>{if(i.idxTotalCount){let e=i.firstFetchHeaders.get(i.idxTotalCount);e&&d(f,Number.parseInt(e),!0)}}),ae(()=>{U()});async function U(){if(l()!==j){j=l(),d(m,void 0);let[e,t]=await i.sspFetch(`page_size=${l()}`);P(e,t),d(r,1)}}function L(e){let t=`page_size=${C(()=>l())}`;if(e){if(a(r)===2)return t;t+=`&backwards=${e}&offset=${i.itemsLength-1}`}return a(m)&&(t+=`&continuation_token=${C(()=>a(m))}`),t}async function Z(){if(a(r)>1){let[e,t]=await i.sspFetch(L(!0));P(e,t),d(r,a(r)-1)}}async function J(){if(a(r)<a(S)){let[e,t]=await i.sspFetch(L(!1));P(e,t),d(r,a(r)+1)}}function P(e,t){if(e===206){let s=t.get("x-page-size");if(!s){console.error("Did not receive x-page-size with SSP");return}l(Number.parseInt(s)),d(S,Number.parseInt(t.get("x-page-count")||"1"),!0),d(m,t.get("x-continuation-token"),!0);let v=i.idxTotalCount?t.get(i.idxTotalCount):void 0;v?d(f,Number.parseInt(v),!0):d(f,void 0)}else console.error("Received non 206 status with SSP")}var y=ce(),z=n(y),H=n(z);const K=E(()=>a(r)<2);A(H,{onclick:Z,invisible:!0,get isDisabled(){return a(K)},children:(e,t)=>{var s=de(),v=n(s);G(v,{width:T}),o(s),_(()=>{x(s,"aria-label",c.pagination.gotoPagePrev),x(s,"data-disabled",a(r)===1)}),h(e,s)},$$slots:{default:!0}});var k=g(H,2),D=n(k),Q=n(D,!0);o(D),o(k);var V=g(k,2);A(V,{onclick:J,invisible:!0,get isDisabled(){return a(N)},children:(e,t)=>{var s=ue(),v=n(s);G(v,{width:T}),o(s),_(()=>{x(s,"aria-label",c.pagination.gotoPageNext),x(s,"data-disabled",a(N))}),h(e,s)},$$slots:{default:!0}}),o(z);var R=g(z,2),I=n(R),w=n(I),W=n(w,!0);o(w);var B=g(w,2),X=n(B);oe(X,{get ariaLabel(){return c.pagination.showCount},options:M,offsetTop:"-14rem",borderless:!0,get value(){return l()},set value(e){l(e)}}),o(B),o(I);var Y=g(I,2);{var $=e=>{var t=ve(),s=n(t);o(t),_(()=>F(s,`${c.pagination.total??""}: ${a(f)??""}`)),h(e,t)};se(Y,e=>{a(f)&&e($)})}o(R),o(y),_(()=>{F(Q,a(r)),F(W,c.pagination.entries)}),h(u,y),ie()}async function ke(u){let i=`/auth/v1/search?ty=${u.ty}&idx=${u.idx}&q=${u.q}`;return u.limit&&(i+=`$limit=${u.limit}`),await le(i)}export{O as P,ze as a,ke as f};
