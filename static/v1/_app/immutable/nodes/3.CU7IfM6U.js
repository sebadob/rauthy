import"../chunks/disclose-version.BDr9Qe-U.js";import{a7 as t,a5 as n,a9 as a,a6 as w,p as je,a3 as S,b as ia,j as v,g as e,a as Ee,h as Ie,a4 as ve,a8 as re,o as Ge,$ as $t}from"../chunks/index-client.wsxBsMrC.js";import{h as _t}from"../chunks/svelte-head.2q0gYbHo.js";import{a as l,t as j,c as ke,n as Ea,b as se}from"../chunks/template.CyQ6qVeq.js";import{i as z}from"../chunks/if.CdP3FEr9.js";import{p as m}from"../chunks/proxy.MUfQDWlv.js";import{O as Oe,a8 as wa,a9 as xt,_ as Nt,P as It,aa as Pt,S as Ct,u as Aa,v as Ut,ab as Dt,ac as qt,ad as zt,ae as Ma,af as Ra,n as He,ag as Ta,ah as jt,F as Je,G as Se,ai as Et,B as La,Z as At,aj as Mt,ak as Rt,A as Tt,al as Lt,V as Vt,am as Kt,an as St,I as Wt,a0 as Ot,ao as Bt,a1 as Va,ap as Ft}from"../chunks/dataFetching.BTF7Y2Cd.js";import{d as Ka,e as Sa,s as d,r as Gt}from"../chunks/render.CGk_31K2.js";import{s as _e,t as Re,f as Ke,e as Ht,g as oe,B as Ce,h as Jt,a as Zt}from"../chunks/Button.BsAE8GCO.js";import{h as Wa,T as Xt,a as Yt,S as Oa,b as Qt,D as er,c as ar}from"../chunks/Devices.DsmKo-R7.js";import{p as L,r as tr,s as rr,a as sr}from"../chunks/props.byAfpN0R.js";import{r as ga}from"../chunks/legacy-client.Dm1n63jC.js";import{e as Ba}from"../chunks/OptionSelect.ZTdPq3oL.js";import{t as Be,s as Fe,b as ie}from"../chunks/helpers.DikdX20z.js";import{C as na}from"../chunks/CheckIcon.D_wF-Arv.js";import{s as Fa}from"../chunks/snippet.CWtw0GJr.js";import{b as Ga}from"../chunks/this.2HyDd4fA.js";import{u as Te}from"../chunks/i18n.svelte.B_PCuqyN.js";import{u as or}from"../chunks/param.svelte.DWWzB7kP.js";import{c as Ze,a as Ue,b as ir,I as Le}from"../chunks/Input.CbYO_vsg.js";import{t as nr}from"../chunks/tweened.as6jNqQ5.js";import{L as Ha}from"../chunks/LangSelector.Q_ihhFqZ.js";import{P as lr}from"../chunks/PasswordPolicy.DFXAbMJT.js";import{P as ba}from"../chunks/PasswordInput.CYtyiDqV.js";import{W as cr}from"../chunks/WebauthnRequest.CJdyVez7.js";import{T as vr}from"../chunks/Template.D8ipGA-s.js";import{M as dr,C as ur}from"../chunks/ContentCenter.24rd6EYh.js";var pr=j('<div class="container svelte-1yqkxw6"><div class="loading svelte-1yqkxw6"><div class="loading-1 svelte-1yqkxw6"></div> <div class="loading-2 svelte-1yqkxw6"></div> <div class="loading-3 svelte-1yqkxw6"></div></div></div>');function mr(W,i){let r=L(i,"background",3,!1),g=L(i,"color",3,"hsl(var(--text))"),s=L(i,"global",3,!1),p=L(i,"offset",3,0);var h=pr(),u=t(h),U=t(u),b=n(U,2),$=n(b,2);a(u),a(h),w(()=>{Be(h,"global",s()),Be(h,"local",!s()),Be(h,"background",r()),_e(u,"style",`margin-top: ${p()??""}px;`),Fe(U,"background",g()),Fe(b,"background",g()),Fe($,"background",g())}),Re(3,h,()=>Ke,()=>({duration:100})),l(W,h)}var hr=j('<div class="load svelte-av2wub"><!></div>'),fr=j('<div class="font-label svelte-av2wub"><!></div>'),wr=j("<button><!></button>");function gr(W,i){je(i,!0);let r=L(i,"type",3,"button"),g=L(i,"role",3,"button"),s=L(i,"ref",15),p=L(i,"level",3,1),h=L(i,"isDisabled",3,!1),u=L(i,"isLoading",3,!1),U=L(i,"invisible",3,!1),b=L(i,"invisibleOutline",3,!1),$=tr(i,["$$slots","$$events","$$legacy","type","role","ref","id","ariaLabel","ariaControls","ariaCurrent","level","width","isDisabled","isLoading","invisible","invisibleOutline","popovertarget","popovertargetaction","onclick","onLeft","onRight","onUp","onDown","children"]),A=Ie(()=>{if(U())return"invisible";switch(p()){case-1:return"l1d";case-2:return"l2d";case-3:return"l3d";case 2:return"l2";case 3:return"l3";default:return"l1"}}),N=S(!u()),F=Ie(()=>h()||u());ia(()=>{u()?setTimeout(()=>{v(N,!1)},120):setTimeout(()=>{v(N,!0)},120)});function I(){switch(p()){case-1:return"var(--btn-text)";case-2:return"hsl(var(--error))";case-3:return"hsl(var(--error))";case 2:return"hsl(var(--action))";case 3:return"hsl(var(--action))";default:return"var(--btn-text)"}}function D(P){var T,Q,G,H,ee;switch(P.code){case"Enter":(T=i.onclick)==null||T.call(i,P);break;case"ArrowLeft":(Q=i.onLeft)==null||Q.call(i);break;case"ArrowRight":(G=i.onRight)==null||G.call(i);break;case"ArrowUp":(H=i.onUp)==null||H.call(i);break;case"ArrowDown":(ee=i.onDown)==null||ee.call(i);break}}var V=wr();let Y;var J=t(V);{var K=P=>{var T=hr(),Q=t(T),G=Ie(I);mr(Q,{background:!1,get color(){return e(G)}}),a(T),l(P,T)},Z=P=>{var T=ke(),Q=ve(T);{var G=H=>{var ee=fr(),ae=t(ee);Fa(ae,()=>i.children),a(ee),Re(1,ee,()=>Ke),l(H,ee)};z(Q,H=>{e(N)&&H(G)},!0)}l(P,T)};z(J,P=>{u()?P(K):P(Z,!1)})}a(V),Ga(V,P=>s(P),()=>s()),w(()=>{Y=Ht(V,Y,{role:g(),type:r(),id:i.id,"aria-label":i.ariaLabel,"aria-controls":i.ariaControls,"aria-current":i.ariaCurrent,class:e(A),"data-isloading":u(),onclick:i.onclick,onkeydown:D,disabled:e(F),"aria-disabled":e(F),popovertarget:i.popovertarget,popovertargetaction:i.popovertargetaction,...$},"svelte-av2wub"),Be(V,"invisibleOutline",b()),Fe(V,"width",i.width)}),l(W,V),Ee()}var br=Ea('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function yr(W,i){let r=L(i,"opacity",3,.9),g=L(i,"width",3,"1.5rem"),s=L(i,"color",3,"hsl(var(--error))");var p=br();_e(p,"stroke-width",2),w(()=>{_e(p,"width",g()),_e(p,"color",s()),_e(p,"opacity",r())}),l(W,p)}function kr(W,i,r){i()||r()}function $r(W){W.stopPropagation()}var _r=j('<span class="closeIcon svelte-1w7l4fj"><!></span>'),xr=j('<div class="relative"><div class="absolute close svelte-1w7l4fj"><!></div></div>'),Nr=j('<dialog aria-modal="true" class="svelte-1w7l4fj"><div role="none" class="svelte-1w7l4fj"><!> <!></div></dialog>');function Ir(W,i){je(i,!0);let r=L(i,"showModal",15),g=L(i,"closeModal",15),s=L(i,"strict",3,!1),p=L(i,"prerender",3,!1),h=Te(),u;ia(()=>{g(U)}),ia(()=>{r()&&(u==null||u.showModal())});function U(D){D==null||D.preventDefault(),u==null||u.close(),r(!1)}var b=Nr();b.__click=[kr,s,U];var $=t(b);$.__click=[$r];var A=t($);{var N=D=>{var V=xr(),Y=t(V),J=t(Y);gr(J,{get ariaLabel(){return h.common.close},invisible:!0,onclick:U,children:(K,Z)=>{var P=_r(),T=t(P);yr(T,{color:"currentColor",width:"1.2rem"}),a(P),l(K,P)},$$slots:{default:!0}}),a(Y),a(V),l(D,V)};z(A,D=>{s()||D(N)})}var F=n(A,2);{var I=D=>{var V=ke(),Y=ve(V);Fa(Y,()=>i.children),l(D,V)};z(F,D=>{(p()||r())&&D(I)})}a($),a(b),Ga(b,D=>u=D,()=>u),w(()=>_e(b,"data-strict",s())),Sa("close",b,()=>{var D;r(!1),(D=i.onClose)==null||D.call(i)}),l(W,b),Ee()}Ka(["click"]);var Pr=j('<div class="link-err value svelte-bckoh9"> </div>'),Cr=j('<div class="fed-btn svelte-bckoh9"><!> <!></div>'),Ur=(W,i)=>v(i,!e(i)),Dr=j('<div class="flex-inline svelte-bckoh9"><img alt="" width="20" height="20"> <span class="provider-name svelte-bckoh9"> </span></div>'),qr=j('<p> </p> <div class="providers svelte-bckoh9"></div>',1),zr=j('<div role="button" tabindex="0" class="provider-link svelte-bckoh9"> </div> <!>',1),jr=j('<div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div>'),Er=j('<div><div><b>WebID:</b></div> <span class="value svelte-bckoh9"><a target="_blank"><!></a></span></div>'),Ar=j('<div class="container svelte-bckoh9"><div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <div><div class="value svelte-bckoh9"> </div> <!></div></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <!> <!></div>');function Ja(W,i){je(i,!0);let r=L(i,"user",15),g=L(i,"viewModePhone",3,!1),s=Te(),p=S(!1),h=S(!1),u=Ie(()=>{var X;return(X=r().account_type)==null?void 0:X.startsWith("federated")}),U=Ie(()=>{var X;return e(u)?`${r().account_type}: ${((X=i.authProvider)==null?void 0:X.name)||""}`:r().account_type}),b=Ie(()=>g()?"rowPhone":"row"),$=Ie(()=>g()?"labelPhone":"label");function A(X){Nt(64,(me,{challenge:xe,verifier:Ne})=>{me||(localStorage.setItem(It,Ne),N(X,xe))})}async function N(X,me){let xe={email:r().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:X,pkce_challenge:me},Ne=await Pt(X,xe);if(Ne.ok){const Pe=await Ne.text();Ct(Pe),window.location.href=Ne.headers.get("location")}else{let Pe=await Ne.json();console.error(Pe)}}async function F(){let X=await xt(),me=await X.json();X.ok?r(me):v(p,!0)}var I=Ar(),D=t(I),V=t(D),Y=t(V),J=t(Y);a(Y),a(V);var K=n(V,2),Z=t(K,!0);a(K),a(D);var P=n(D,2),T=t(P),Q=t(T),G=t(Q);a(Q),a(T);var H=n(T,2),ee=t(H,!0);a(H),a(P);var ae=n(P,2),ue=t(ae),O=t(ue),q=t(O);a(O),a(ue);var M=n(ue,2),k=t(M,!0);a(M),a(ae);var x=n(ae,2),y=t(x),c=t(y),C=t(c);a(c),a(y);var o=n(y,2),_=t(o,!0);a(o),a(x);var f=n(x,2),R=t(f),te=t(R),ne=t(te);a(te),a(R);var he=n(R,2),pe=t(he),we=t(pe,!0);a(pe);var ge=n(pe,2);{var $e=X=>{var me=Cr(),xe=t(me);Ce(xe,{level:3,$$events:{click:F},children:(De,ze)=>{re();var We=se();w(()=>d(We,s.account.providerUnlink)),l(De,We)},$$slots:{default:!0}});var Ne=n(xe,2);{var Pe=De=>{var ze=Pr(),We=t(ze,!0);a(ze),w(()=>d(We,s.account.providerUnlinkDesc)),l(De,ze)};z(Ne,De=>{e(p)&&De(Pe)})}a(me),l(X,me)},qe=X=>{var me=ke(),xe=ve(me);{var Ne=Pe=>{var De=zr(),ze=ve(De);ze.__click=[Ur,h];var We=t(ze,!0);a(ze);var gt=n(ze,2);Ir(gt,{get showModal(){return e(h)},set showModal(ua){v(h,m(ua))},children:(ua,fs)=>{var Da=qr(),pa=ve(Da),bt=t(pa,!0);a(pa);var qa=n(pa,2);Ba(qa,21,()=>i.providers,ma=>ma.id,(ma,ha)=>{Ce(ma,{level:3,$$events:{click:()=>A(e(ha).id)},children:(yt,ws)=>{var fa=Dr(),za=t(fa),ja=n(za,2),kt=t(ja,!0);a(ja),a(fa),w(()=>{_e(za,"src",`/auth/v1/providers/${e(ha).id}/img`),d(kt,e(ha).name)}),l(yt,fa)},$$slots:{default:!0}})}),a(qa),w(()=>d(bt,s.account.providerLinkDesc)),l(ua,Da)},$$slots:{default:!0}}),w(()=>d(We,s.account.providerLink)),Sa("keypress",ze,()=>v(h,!e(h))),l(Pe,De)};z(xe,Pe=>{i.providers.length>0&&Pe(Ne)},!0)}l(X,me)};z(ge,X=>{e(u)?X($e):X(qe,!1)})}a(he),a(f);var be=n(f,2),E=t(be),le=t(E),ce=t(le);a(le),a(E);var ye=n(E,2),de=t(ye,!0);a(ye),a(be);var B=n(be,2),fe=t(B),Ve=t(fe),Ae=t(Ve);a(Ve),a(fe);var Me=n(fe,2),la=t(Me,!0);a(Me),a(B);var ca=n(B,2),Xe=t(ca),ya=t(Xe),tt=t(ya);a(ya),a(Xe);var rt=n(Xe,2),st=Ie(()=>!!r().webauthn_user_id);na(rt,{get check(){return e(st)}}),a(ca);var va=n(ca,2),Ye=t(va),ka=t(Ye),ot=t(ka);a(ka),a(Ye);var it=n(Ye,2);na(it,{get check(){return r().enabled}}),a(va);var da=n(va,2),Qe=t(da),$a=t(Qe),nt=t($a);a($a),a(Qe);var lt=n(Qe,2);na(lt,{get check(){return r().email_verified}}),a(da);var ea=n(da,2),aa=t(ea),_a=t(aa),ct=t(_a);a(_a),a(aa);var xa=n(aa,2),vt=t(xa,!0);w(()=>d(vt,Oe(r().last_login))),a(xa),a(ea);var ta=n(ea,2),ra=t(ta),Na=t(ra),dt=t(Na);a(Na),a(ra);var Ia=n(ra,2),ut=t(Ia,!0);w(()=>d(ut,r().password_expires&&Oe(r().password_expires)||s.common.never)),a(Ia),a(ta);var sa=n(ta,2),oa=t(sa),Pa=t(oa),pt=t(Pa);a(Pa),a(oa);var Ca=n(oa,2),mt=t(Ca,!0);w(()=>d(mt,Oe(r().created_at))),a(Ca),a(sa);var Ua=n(sa,2);{var ht=X=>{var me=jr(),xe=t(me),Ne=t(xe),Pe=t(Ne);a(Ne),a(xe);var De=n(xe,2),ze=t(De,!0);w(()=>d(ze,Oe(r().user_expires))),a(De),a(me),w(()=>{ie(me,oe(e(b)),"svelte-bckoh9"),ie(xe,oe(e($)),"svelte-bckoh9"),d(Pe,`${s.account.userExpiry??""}:`)}),l(X,me)};z(Ua,X=>{r().user_expires&&X(ht)})}var ft=n(Ua,2);{var wt=X=>{var me=Er(),xe=t(me),Ne=n(xe,2),Pe=t(Ne);w(()=>_e(Pe,"href",wa(r().id)));var De=t(Pe);Wa(De,()=>wa(r().id).replace("/auth/","/auth/<wbr/>")),a(Pe),a(Ne),a(me),w(()=>{ie(me,oe(e(b)),"svelte-bckoh9"),ie(xe,oe(e($)),"svelte-bckoh9")}),l(X,me)};z(ft,X=>{i.webIdData&&X(wt)})}a(I),w(()=>{ie(D,oe(e(b)),"svelte-bckoh9"),ie(V,oe(e($)),"svelte-bckoh9"),d(J,`${s.common.email??""}:`),d(Z,r().email),ie(P,oe(e(b)),"svelte-bckoh9"),ie(T,oe(e($)),"svelte-bckoh9"),d(G,`${s.account.givenName??""}:`),d(ee,r().given_name),ie(ae,oe(e(b)),"svelte-bckoh9"),ie(ue,oe(e($)),"svelte-bckoh9"),d(q,`${s.account.familyName??""}:`),d(k,r().family_name),ie(x,oe(e(b)),"svelte-bckoh9"),ie(y,oe(e($)),"svelte-bckoh9"),d(C,`${s.account.user??""} ID:`),d(_,r().id),ie(f,oe(e(b)),"svelte-bckoh9"),ie(R,oe(e($)),"svelte-bckoh9"),d(ne,`${s.account.accType??""}:`),d(we,e(U)||""),ie(be,oe(e(b)),"svelte-bckoh9"),ie(E,oe(e($)),"svelte-bckoh9"),d(ce,`${s.account.roles??""}:`),d(de,r().roles||"None"),ie(B,oe(e(b)),"svelte-bckoh9"),ie(fe,oe(e($)),"svelte-bckoh9"),d(Ae,`${s.account.groups??""}:`),d(la,r().groups||"None"),ie(Xe,oe(e($)),"svelte-bckoh9"),d(tt,`${s.account.mfaActivated??""}:`),ie(Ye,oe(e($)),"svelte-bckoh9"),d(ot,`${s.account.userEnabled??""}:`),ie(Qe,oe(e($)),"svelte-bckoh9"),d(nt,`${s.account.emailVerified??""}:`),ie(ea,oe(e(b)),"svelte-bckoh9"),ie(aa,oe(e($)),"svelte-bckoh9"),d(ct,`${s.account.lastLogin??""}:`),ie(ta,oe(e(b)),"svelte-bckoh9"),ie(ra,oe(e($)),"svelte-bckoh9"),d(dt,`${s.account.passwordExpiry??""}:`),ie(sa,oe(e(b)),"svelte-bckoh9"),ie(oa,oe(e($)),"svelte-bckoh9"),d(pt,`${s.account.userCreated??""}:`)}),l(W,I),Ee()}Ka(["click"]);function Za(W,i){je(i,!0);let r=L(i,"selected",15),g=L(i,"showWebId",3,!1),s=Te(),p=m(g()?[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,"WebID",s.account.devices,s.account.navLogout]:[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,s.account.devices,s.account.navLogout]);Ge(()=>{or("v").get()==="devices"&&r(s.account.devices)}),Xt(W,{get labels(){return p},get selected(){return r()},set selected(h){r(h)}}),Ee()}var Mr=j("<p> </p>"),Rr=j('<div class="success svelte-1xh7x72">Update successful <!></div>'),Tr=j('<div class="err svelte-1xh7x72"> </div>'),Lr=j('<div class="wrapper svelte-1xh7x72"><div class="container svelte-1xh7x72"><!> <!> <!> <div> </div> <!> <!> <!> <!> <!> <!> <!> <div class="bottom svelte-1xh7x72"><!></div></div></div>');function Xa(W,i){je(i,!0);let r=L(i,"user",31,()=>m({})),g=L(i,"viewModePhone",3,!1),s=Te(),p=Ie(()=>g()?"calc(100vw - 1.5rem)":"300px");const h="8rem";let u=S(!1),U=S(""),b=S(!1),$=S(!1),A=m({email:r().email,givenName:r().given_name,familyName:r().family_name}),N=S(m({}));const F=Ze().shape({email:Ue().required(s.account.validEmail).email(s.account.validEmail),givenName:Ue().required(s.account.validGivenName).matches(Aa,s.account.validGivenName),familyName:Ue().nullable().matches(Ut,s.account.validFamilyName)});let I=S(m({}));const D=Ze().shape({birthdate:Ue().nullable().trim().matches(Dt,s.common.invalidInput),phone:Ue().nullable().trim().matches(qt,"+..."),street:Ue().nullable().trim().matches(zt,s.common.invalidInput),zip:ir().nullable().min(1e3).max(999999),city:Ue().nullable().trim().matches(Ma,s.common.invalidInput),country:Ue().nullable().trim().matches(Ma,s.common.invalidInput)});function V(o){o.code==="Enter"&&Y()}async function Y(){if(!await J()){v(U,m(s.common.invalidInput));return}v(u,!0);const o={email:A.email,given_name:A.givenName,family_name:A.familyName||null,user_values:r().user_values};o.user_values.phone&&(o.user_values.phone=o.user_values.phone.replaceAll(" ","")),o.user_values.zip&&(o.user_values.zip=Number.parseInt(o.user_values.zip));let _=await Ra(r().id,o);if(_.ok)v(b,!0),r(r().email=A.email,!0),r(r().given_name=A.givenName,!0),r(r().family_name=A.familyName,!0),_.status===202&&v($,!0);else{let f=await _.json();v(U,m(f.message))}v(u,!1)}async function J(){let o=!0;try{await F.validate(A,{abortEarly:!1}),v(N,m({}))}catch(_){v(N,m(He(_))),o=!1}try{await D.validate(r().user_values,{abortEarly:!1}),v(I,m({}))}catch(_){v(I,m(He(_))),o=!1}return o}var K=Lr(),Z=t(K),P=t(Z);Le(P,{autocomplete:"family-name",get placeholder(){return s.common.email},get width(){return e(p)},get value(){return A.email},set value(o){A.email=o},get error(){return e(N).email},set error(o){e(N).email=o},$$events:{input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.common.email.toUpperCase())),l(o,f)},$$slots:{default:!0}});var T=n(P,2);Le(T,{autocomplete:"given-name",get placeholder(){return s.account.givenName},get width(){return e(p)},get value(){return A.givenName},set value(o){A.givenName=o},get error(){return e(N).givenName},set error(o){e(N).givenName=o},$$events:{input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.account.givenName.toUpperCase())),l(o,f)},$$slots:{default:!0}});var Q=n(T,2);Le(Q,{autocomplete:"family-name",get placeholder(){return s.account.familyName},get width(){return e(p)},get value(){return A.familyName},set value(o){A.familyName=o},get error(){return e(N).familyName},set error(o){e(N).familyName=o},$$events:{input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.account.familyName.toUpperCase())),l(o,f)},$$slots:{default:!0}});var G=n(Q,2);Fe(G,"margin",".5rem");var H=t(G,!0);a(G);var ee=n(G,2);Le(ee,{autocomplete:"street-address",get placeholder(){return s.account.street},get width(){return e(p)},get value(){return r().user_values.street},set value(o){r(r().user_values.street=o,!0)},get error(){return e(I).street},set error(o){e(I).street=o},$$events:{keypress:V,input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.account.street.toUpperCase())),l(o,f)},$$slots:{default:!0}});var ae=n(ee,2);Le(ae,{type:"number",autocomplete:"postal-code",get placeholder(){return s.account.zip},min:1e3,max:999999,get width(){return e(p)},get value(){return r().user_values.zip},set value(o){r(r().user_values.zip=o,!0)},get error(){return e(I).zip},set error(o){e(I).zip=o},$$events:{keypress:V,input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.account.zip.toUpperCase())),l(o,f)},$$slots:{default:!0}});var ue=n(ae,2);Le(ue,{autocomplete:"adress-level2",get placeholder(){return s.account.city},get width(){return e(p)},get value(){return r().user_values.city},set value(o){r(r().user_values.city=o,!0)},get error(){return e(I).city},set error(o){e(I).city=o},$$events:{keypress:V,input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.account.city.toUpperCase())),l(o,f)},$$slots:{default:!0}});var O=n(ue,2);Le(O,{autocomplete:"country",get placeholder(){return s.account.country},get width(){return e(p)},get value(){return r().user_values.country},set value(o){r(r().user_values.country=o,!0)},get error(){return e(I).country},set error(o){e(I).country=o},$$events:{keypress:V,input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.account.country.toUpperCase())),l(o,f)},$$slots:{default:!0}});var q=n(O,2);Le(q,{autocomplete:"tel",get placeholder(){return s.account.phone},get width(){return e(p)},get value(){return r().user_values.phone},set value(o){r(r().user_values.phone=o,!0)},get error(){return e(I).phone},set error(o){e(I).phone=o},$$events:{keypress:V,input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.account.phone.toUpperCase())),l(o,f)},$$slots:{default:!0}});var M=n(q,2);Le(M,{type:"date",autocomplete:"bday",get placeholder(){return s.account.birthdate},get width(){return e(p)},get value(){return r().user_values.birthdate},set value(o){r(r().user_values.birthdate=o,!0)},get error(){return e(I).birthdate},set error(o){e(I).birthdate=o},$$events:{keypress:V,input:J},children:(o,_)=>{re();var f=se();w(()=>d(f,s.account.birthdate.toUpperCase())),l(o,f)},$$slots:{default:!0}});var k=n(M,2);Ce(k,{width:h,level:1,get isLoading(){return e(u)},set isLoading(o){v(u,m(o))},$$events:{click:Y},children:(o,_)=>{re();var f=se();w(()=>d(f,s.common.save)),l(o,f)},$$slots:{default:!0}});var x=n(k,2),y=t(x);{var c=o=>{var _=Rr(),f=n(t(_));{var R=te=>{var ne=Mr(),he=t(ne,!0);a(ne),w(()=>d(he,s.account.emailUpdateConfirm)),l(te,ne)};z(f,te=>{e($)&&te(R)})}a(_),Re(3,_,()=>Ke),l(o,_)},C=o=>{var _=ke(),f=ve(_);{var R=te=>{var ne=Tr(),he=t(ne,!0);a(ne),w(()=>d(he,e(U))),Re(3,ne,()=>Ke),l(te,ne)};z(f,te=>{e(U)&&te(R)},!0)}l(o,_)};z(y,o=>{e(b)?o(c):o(C,!1)})}a(x),a(Z),a(K),w(()=>d(H,s.account.optionalValues)),l(W,K),Ee()}var Vr=Ea('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function Kr(W,i){let r=L(i,"opacity",3,.9),g=L(i,"width",3,24),s=L(i,"color",3,"currentColor");var p=Vr();_e(p,"stroke-width",2),w(()=>{_e(p,"stroke",s()),_e(p,"width",g()),_e(p,"opacity",r())}),l(W,p)}var Sr=j('<!> <div class="regBtns svelte-q7vfo0"><!> <!></div>',1),Wr=j('<div class="regNewBtn svelte-q7vfo0"><!></div>'),Or=j('<div class="keysHeader svelte-q7vfo0"> </div>'),Br=j("<div><!></div>"),Fr=j('<div class="row svelte-q7vfo0"><div></div> <div class="deleteBtn svelte-q7vfo0"><!></div></div>'),Gr=j('<div class="keyContainer svelte-q7vfo0"><div class="row svelte-q7vfo0"> <div class="nameUv svelte-q7vfo0"><b> </b> <!></div></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <!></div>'),Hr=j('<div class="button svelte-q7vfo0"><!></div>'),Jr=j('<div class="container svelte-q7vfo0"><p class="svelte-q7vfo0"> <br><br> </p> <!> <!> <div class="keysContainer svelte-q7vfo0"></div> <!> <div class="svelte-q7vfo0"> </div></div>');function Ya(W,i){je(i,!0);let r=L(i,"user",19,()=>({})),g=Te(),s=S(!1),p=S(""),h=S(!1),u=S(r().account_type==="password"),U=S(m([]));ga(()=>{e(U).length>0&&r().account_type==="passkey"&&v(u,e(U).length>1)});let b=m({passkeyName:""}),$=S(m({}));const A=Ze().shape({passkeyName:Ue().required(g.common.invalidInput).matches(Aa,g.mfa.passkeyNameErr)});Ge(()=>{F()});function N(){v(s,!1),v(p,"")}async function F(){let k=await Ta(i.session.user_id),x=await k.json();k.ok?v(U,m(x)):console.error("error fetching passkeys: "+x.message)}async function I(){if(N(),!await Y())return;const k=b.passkeyName;if(k.length<2){v(s,!0),v(p,m(g.mfa.passkeyNameErr));return}let x=await jt(r().id,{passkey_name:k});if(x.status===200){let y=await x.json();y.publicKey.challenge=Je(y.publicKey.challenge),y.publicKey.user.id=Je(y.publicKey.user.id),y.publicKey.excludeCredentials=y.publicKey.excludeCredentials,y.publicKey.excludeCredentials&&(y.publicKey.excludeCredentials=y.publicKey.excludeCredentials.map(o=>(o.id=Je(o.id),o)));let c=await navigator.credentials.create(y),C={passkey_name:k,data:{id:c.id,rawId:Se(c.rawId),response:{attestationObject:Se(c.response.attestationObject),clientDataJSON:Se(c.response.clientDataJSON)},type:c.type}};x=await Et(r().id,C),x.status===201?(v(h,!1),b.passkeyName="",await F()):console.error(x)}else v(s,!0),v(p,m(g.mfa.errorReg))}async function D(){N();let k=await La(r().id,{purpose:"Test"});if(k.status===200){let x=await k.json(),y=x.rcr;y.publicKey.challenge=Je(y.publicKey.challenge);for(let o of y.publicKey.allowCredentials)o.id=Je(o.id);let c;try{c=await navigator.credentials.get(y)}catch{v(s,!0),v(p,m(g.mfa.invalidKeyUsed));return}let C={code:x.code,data:{id:c.id,rawId:Se(c.rawId),response:{authenticatorData:Se(c.response.authenticatorData),clientDataJSON:Se(c.response.clientDataJSON),signature:Se(c.response.signature)},type:c.type}};k=await At(r().id,C),k.status===202?(v(p,m(g.mfa.testSuccess)),await F()):console.error(k)}else v(s,!0),v(p,m(g.mfa.testError))}async function V(k){let x=await Mt(r().id,k);if(x.status===200)await F();else{let y=await x.json();v(s,!0),v(p,m(y.message))}}async function Y(){try{return await A.validate(b,{abortEarly:!1}),v($,m({})),!0}catch(k){return v($,m(He(k))),!1}}var J=Jr(),K=t(J),Z=t(K),P=n(Z,3);a(K);var T=n(K,2);{var Q=k=>{var x=Sr(),y=ve(x);Le(y,{autocomplete:"off",get placeholder(){return g.mfa.passkeyName},autofocus:!0,get value(){return b.passkeyName},set value(_){b.passkeyName=_},get error(){return e($).passkeyName},set error(_){e($).passkeyName=_},$$events:{input:Y,enter:I},children:(_,f)=>{re();var R=se();w(()=>d(R,g.mfa.passkeyName)),l(_,R)},$$slots:{default:!0}});var c=n(y,2),C=t(c);Ce(C,{level:1,$$events:{click:I},children:(_,f)=>{re();var R=se();w(()=>d(R,g.mfa.register)),l(_,R)},$$slots:{default:!0}});var o=n(C,2);Ce(o,{level:4,$$events:{click:()=>v(h,!1)},children:(_,f)=>{re();var R=se();w(()=>d(R,g.common.cancel)),l(_,R)},$$slots:{default:!0}}),a(c),l(k,x)},G=k=>{var x=Wr(),y=t(x);Ce(y,{level:3,$$events:{click:()=>v(h,!0)},children:(c,C)=>{re();var o=se();w(()=>d(o,g.mfa.registerNew)),l(c,o)},$$slots:{default:!0}}),a(x),l(k,x)};z(T,k=>{e(h)?k(Q):k(G,!1)})}var H=n(T,2);{var ee=k=>{var x=Or(),y=t(x,!0);a(x),w(()=>d(y,g.mfa.registerdKeys)),l(k,x)};z(H,k=>{e(U).length>0&&k(ee)})}var ae=n(H,2);Ba(ae,21,()=>e(U),k=>k.name,(k,x)=>{var y=Gr(),c=t(y),C=t(c),o=n(C),_=t(o),f=t(_,!0);a(_);var R=n(_,2);{var te=ce=>{Yt(ce,{get text(){return g.account.userVerifiedTooltip},children:(ye,de)=>{var B=Br();Fe(B,"margin-bottom","-.25rem");var fe=t(B);Kr(fe,{width:18,color:"var(--col-acnt)"}),a(B),l(ye,B)},$$slots:{default:!0}})};z(R,ce=>{e(x).user_verified&&ce(te)})}a(o),a(c);var ne=n(c,2),he=t(ne),pe=n(he),we=t(pe,!0);w(()=>d(we,Oe(e(x).registered))),a(pe),a(ne);var ge=n(ne,2),$e=t(ge),qe=n($e),be=t(qe,!0);w(()=>d(be,Oe(e(x).last_used))),a(qe),a(ge);var E=n(ge,2);{var le=ce=>{var ye=Fr(),de=n(t(ye),2),B=t(de);Ce(B,{level:4,$$events:{click:()=>V(e(x).name)},children:(fe,Ve)=>{re();var Ae=se();w(()=>d(Ae,g.mfa.delete.toUpperCase())),l(fe,Ae)},$$slots:{default:!0}}),a(de),a(ye),l(ce,ye)};z(E,ce=>{e(u)&&ce(le)})}a(y),w(()=>{d(C,`${`${g.mfa.passkeyName}: `??""} `),d(f,e(x).name),d(he,`${`${g.mfa.registerd}: `??""} `),d($e,`${`${g.mfa.lastUsed}: `??""} `)}),l(k,y)}),a(ae);var ue=n(ae,2);{var O=k=>{var x=Hr(),y=t(x);Ce(y,{level:1,$$events:{click:D},children:(c,C)=>{re();var o=se();w(()=>d(o,g.mfa.test)),l(c,o)},$$slots:{default:!0}}),a(x),l(k,x)};z(ue,k=>{e(U).length>0&&k(O)})}var q=n(ue,2),M=t(q,!0);a(q),a(J),w(()=>{d(Z,`${g.mfa.p1??""} `),d(P,` ${g.mfa.p2??""}`),Be(q,"msg",!e(s)),Be(q,"err",e(s)),d(M,e(p))}),l(W,J),Ee()}var Zr=j('<div class="container svelte-dpnwj7"><!> <!> <!> <!> <!> <div class="err svelte-dpnwj7"> </div></div>');function Xr(W,i){je(i,!0);let r=L(i,"formValues",31,()=>m({})),g=L(i,"btnWidth",3,"4rem"),s=L(i,"hideCurrentPassword",3,!1),p=L(i,"isValid",15),h=Te();p(I);let u=S(!1),U=S(""),b=S(void 0),$=S(m({})),A=Ie(()=>{var K;return((K=r().new)==null?void 0:K.length)>6&&r().new===r().verify});const N=Ze().shape({current:Ue().required(h.account.passwordCurrReq),new:Ue().required(h.account.passwordNewReq),verify:Ue().required(h.account.passwordNoMatch)}),F=Ze().shape({new:Ue().required(h.account.passwordNewReq),verify:Ue().required(h.account.passwordNoMatch)});Ge(async()=>{let K=await Rt(),Z=await K.json();K.ok?v(b,m(Z)):v(U,m(Z.message))});async function I(){if(v(U,""),s())try{await F.validate(r(),{abortEarly:!1}),v($,m({}))}catch(K){return v($,m(He(K))),!1}else try{await N.validate(r(),{abortEarly:!1}),v($,m({}))}catch(K){return v($,m(He(K))),!1}return e(u)?r().new.length>256?(v(U,"max 256"),!1):r().new!==r().verify?(v(U,m(h.account.passwordNoMatch)),!1):!0:(v(U,m(h.account.passwordPolicyFollow)),!1)}function D(){const K=e(b).length_min>20?e(b).length_min:20;let Z=Tt(K,e(b).include_lower_case,e(b).include_upper_case,e(b).include_digits,e(b).include_special);r(r().new=Z,!0),r(r().verify=Z,!0)}var V=ke(),Y=ve(V);{var J=K=>{var Z=Zr(),P=t(Z);lr(P,{t:h,get policy(){return e(b)},get password(){return r().new},get accepted(){return e(u)},set accepted(O){v(u,m(O))}});var T=n(P,2);{var Q=O=>{ba(O,{get error(){return e($).current},autocomplete:"current-password",get placeholder(){return h.account.passwordCurr},get width(){return i.inputWidth},get value(){return r().current},set value(q){r(r().current=q,!0)},$$events:{input:I},children:(q,M)=>{re();var k=se();w(()=>d(k,h.account.passwordCurr.toUpperCase())),l(q,k)},$$slots:{default:!0}})};z(T,O=>{s()||O(Q)})}var G=n(T,2);ba(G,{get error(){return e($).new},autocomplete:"new-password",get placeholder(){return h.account.passwordNew},get showCopy(){return e(A)},get width(){return i.inputWidth},get value(){return r().new},set value(O){r(r().new=O,!0)},$$events:{input:I},children:(O,q)=>{re();var M=se();w(()=>d(M,h.account.passwordNew.toUpperCase())),l(O,M)},$$slots:{default:!0}});var H=n(G,2);ba(H,{get error(){return e($).verify},autocomplete:"new-password",get placeholder(){return h.account.passwordConfirm},get showCopy(){return e(A)},get width(){return i.inputWidth},get value(){return r().verify},set value(O){r(r().verify=O,!0)},$$events:{input:I},children:(O,q)=>{re();var M=se();w(()=>d(M,h.account.passwordConfirm.toUpperCase())),l(O,M)},$$slots:{default:!0}});var ee=n(H,2);Ce(ee,{level:2,get width(){return g()},$$events:{click:D},children:(O,q)=>{re();var M=se();w(()=>d(M,h.account.generateRandom)),l(O,M)},$$slots:{default:!0}});var ae=n(ee,2),ue=t(ae,!0);a(ae),a(Z),w(()=>d(ue,e(U))),l(K,Z)};z(Y,K=>{e(b)&&K(J)})}return l(W,V),Ee({isPwdValid:I})}var Yr=j('<div class="m-05 svelte-od1aaa"><p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"><b> </b></p> <p class="svelte-od1aaa"> </p> <!></div>'),Qr=j('<p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <!>',1),es=j("<div><!></div>"),as=j('<div class="convertPasskey svelte-od1aaa"><h3> </h3> <p class="svelte-od1aaa"> </p> <!></div>'),ts=j('<div class="success svelte-od1aaa">Update successful</div>'),rs=j('<div class="err svelte-od1aaa"> </div>'),ss=j('<div><!> <div><!></div> <!></div> <!> <div class="bottom svelte-od1aaa"><!></div>',1),os=j('<div class="wrapper svelte-od1aaa"><div class="container svelte-od1aaa"><!> <!> <!> <!></div></div>');function Qa(W,i){je(i,!0);let r=L(i,"user",19,()=>({})),g=L(i,"viewModePhone",3,!1),s=Te(),p=Ie(()=>g()?"calc(100vw - 1.5rem)":"300px");const h="13rem";let u=r().account_type,U=S(m([])),b=S(void 0),$=S(!1),A=S(!1),N=S(""),F=S(!1),I=S(void 0),D=S(m({current:"",new:"",verify:""})),V=Ie(()=>e(U).filter(c=>c.user_verified).length>0);Ge(()=>{Y()});async function Y(){let c=await Ta(r().id),C=await c.json();c.ok?v(U,m(C)):console.error("error fetching passkeys: "+C.message)}async function J(){let c=await Lt(r().id);if(c.ok)window.location.reload();else{let C=await c.json();console.error("error fetching passkeys: "+C.message)}}async function K(){e(U).length>0?await Z():await P()}async function Z(){if(!await e(b)()){v(N,m(s.common.invalidInput));return}const c=await La(r().id,{purpose:"PasswordNew"});v(I,m(await c.json()))}async function P(c){if(!await e(b)()){v(N,m(s.common.invalidInput));return}v(A,!0);let C={password_new:e(D).new};c?C.mfa_code=c:C.password_current=e(D).current;let o=await Ra(r().id,C);if(o.ok)v(F,!0),v(D,m({})),window.location.reload();else{let _=await o.json();v(N,m(_.message))}v(A,!1)}function T(){v(I,void 0),v(N,m(s.mfa.errorReg))}function Q(c){c&&(v(I,void 0),P(c.code))}async function G(){let c=await Vt({email:r().email});if(c.ok)v(F,!0);else{let C=await c.json();v(N,m(C.message))}}var H=os(),ee=t(H),ae=t(ee);{var ue=c=>{cr(c,{purpose:"PasswordNew",onSuccess:Q,onError:T,get data(){return e(I)},set data(C){v(I,m(C))}})};z(ae,c=>{e(I)&&c(ue)})}var O=n(ae,2);{var q=c=>{var C=Yr(),o=t(C),_=t(o,!0);a(o);var f=n(o,2),R=t(f),te=t(R,!0);a(R),a(f);var ne=n(f,2),he=t(ne,!0);a(ne);var pe=n(ne,2);{var we=$e=>{na($e,{check:!0})},ge=$e=>{Ce($e,{width:h,level:3,$$events:{click:G},children:(qe,be)=>{re();var E=se();w(()=>d(E,s.account.passwordReset)),l(qe,E)},$$slots:{default:!0}})};z(pe,$e=>{e(F)?$e(we):$e(ge,!1)})}a(C),w(()=>{d(_,s.account.federatedConvertPassword1),d(te,i.authProvider.name||"UNKNOWN"),d(he,s.account.federatedConvertPassword2)}),l(c,C)};z(O,c=>{u==="federated"&&c(q)})}var M=n(O,2);{var k=c=>{var C=Qr(),o=ve(C),_=t(o,!0);a(o);var f=n(o,2),R=t(f,!0);a(f);var te=n(f,2),ne=t(te,!0);a(te);var he=n(te,2);Ce(he,{width:h,level:3,$$events:{click:()=>v($,!0)},children:(pe,we)=>{re();var ge=se();w(()=>d(ge,s.account.convertAccount)),l(pe,ge)},$$slots:{default:!0}}),w(()=>{d(_,s.account.accTypePasskeyText1),d(R,s.account.accTypePasskeyText2),d(ne,s.account.accTypePasskeyText3)}),l(c,C)};z(M,c=>{(u==="passkey"||u==="federated_passkey")&&!e($)&&c(k)})}var x=n(M,2);{var y=c=>{var C=ss(),o=ve(C),_=t(o),f=Ie(()=>!(u==="password"&&e(U).length<1));Xr(_,{btnWidth:h,get inputWidth(){return e(p)},get hideCurrentPassword(){return e(f)},get formValues(){return e(D)},set formValues(E){v(D,m(E))},get isValid(){return e(b)},set isValid(E){v(b,m(E))}});var R=n(_,2),te=t(R);Ce(te,{width:h,level:1,get isLoading(){return e(A)},set isLoading(E){v(A,m(E))},$$events:{click:K},children:(E,le)=>{re();var ce=se();w(()=>d(ce,s.common.save)),l(E,ce)},$$slots:{default:!0}}),a(R);var ne=n(R,2);{var he=E=>{var le=es(),ce=t(le);Ce(ce,{width:h,level:4,$$events:{click:()=>v($,!1)},children:(ye,de)=>{re();var B=se();w(()=>d(B,s.common.cancel)),l(ye,B)},$$slots:{default:!0}}),a(le),l(E,le)};z(ne,E=>{e($)&&!e(A)&&E(he)})}a(o);var pe=n(o,2);{var we=E=>{var le=as(),ce=t(le),ye=t(ce,!0);a(ce);var de=n(ce,2),B=t(de,!0);a(de);var fe=n(de,2);Ce(fe,{width:h,level:3,$$events:{click:J},children:(Ve,Ae)=>{re();var Me=se();w(()=>d(Me,s.account.convertAccount)),l(Ve,Me)},$$slots:{default:!0}}),a(le),w(()=>{d(ye,s.account.convertAccount),d(B,s.account.convertAccountP1)}),l(E,le)};z(pe,E=>{!e($)&&e(V)&&E(we)})}var ge=n(pe,2),$e=t(ge);{var qe=E=>{var le=ts();Re(3,le,()=>Ke),l(E,le)},be=E=>{var le=ke(),ce=ve(le);{var ye=de=>{var B=rs(),fe=t(B,!0);a(B),w(()=>d(fe,e(N))),Re(3,B,()=>Ke),l(de,B)};z(ce,de=>{e(N)&&de(ye)},!0)}l(E,le)};z($e,E=>{e(F)?E(qe):E(be,!1)})}a(ge),Re(1,o,()=>Jt,()=>({duration:350})),l(c,C)};z(x,c=>{(u==="password"||u==="federated_password"||e($))&&c(y)})}a(ee),a(H),l(W,H),Ee()}var is=j('<div><p class="svelte-naxx27"> </p>    <textarea class="font-mono text svelte-naxx27"></textarea></div>'),ns=j('<div class="success svelte-naxx27">Update successful</div>'),ls=j('<div class="err svelte-naxx27"> </div>'),cs=j('<div class="wrapper svelte-naxx27"><div class="container svelte-naxx27"><p class="svelte-naxx27"> </p> <p class="svelte-naxx27"><a target="_blank"><!></a></p> <div class="row svelte-naxx27"><div class="label svelte-naxx27">E-Mail</div> <!></div> <div class="row svelte-naxx27"><div class="label svelte-naxx27"> </div> <!></div> <!> <!> <div class="bottom svelte-naxx27"><!></div></div></div>');function et(W,i){je(i,!0);let r=L(i,"webIdData",15),g=Te();const s="12rem";let p=S(""),h=S(!1),u=S(!!r().custom_triples),U=wa(r().user_id);ga(()=>{e(h)&&setTimeout(()=>{v(h,!1)},3e3)});async function b(){v(p,"");let q=await Kt(r().user_id,r());if(q.ok)v(h,!0);else{let M=await q.json();v(p,m(M.message))}}var $=cs(),A=t($),N=t(A),F=t(N,!0);a(N);var I=n(N,2),D=t(I);_e(D,"href",U);var V=t(D);Wa(V,()=>U.replace("/auth/","/auth/<wbr/>")),a(D),a(I);var Y=n(I,2),J=n(t(Y),2);Oa(J,{get selected(){return r().expose_email},set selected(q){r(r().expose_email=q,!0)}}),a(Y);var K=n(Y,2),Z=t(K),P=t(Z,!0);a(Z);var T=n(Z,2);Oa(T,{get selected(){return e(u)},set selected(q){v(u,m(q))}}),a(K);var Q=n(K,2);{var G=q=>{var M=is(),k=t(M),x=t(k,!0);a(k);var y=n(k,2);Gt(y),_e(y,"rows",15),_e(y,"cols",40),a(M),w(()=>d(x,g.account.webIdDescData)),Qt(y,()=>r().custom_triples,c=>r(r().custom_triples=c,!0)),Re(3,M,()=>Zt),l(q,M)};z(Q,q=>{e(u)&&q(G)})}var H=n(Q,2);Ce(H,{width:s,level:1,$$events:{click:b},children:(q,M)=>{re();var k=se();w(()=>d(k,g.common.save)),l(q,k)},$$slots:{default:!0}});var ee=n(H,2),ae=t(ee);{var ue=q=>{var M=ns();Re(3,M,()=>Ke),l(q,M)},O=q=>{var M=ke(),k=ve(M);{var x=y=>{var c=ls(),C=t(c,!0);a(c),w(()=>d(C,e(p))),Re(3,c,()=>Ke),l(y,c)};z(k,y=>{e(p)&&y(x)},!0)}l(q,M)};z(ae,q=>{e(h)?q(ue):q(O,!1)})}a(ee),a(A),a($),w(()=>{d(F,g.account.webIdDesc),d(P,g.account.webIdExpertMode)}),l(W,$),Ee()}var vs=j('<div class="container svelte-1nrg3bb"><!></div>');function at(W,i){je(i,!0);var r=vs(),g=t(r);er(g,{get userId(){return i.session.user_id}}),a(r),l(W,r),Ee()}var ds=j('<div class="wrapper svelte-47czfz"><!> <div class="headerPhone svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="innerPhone svelte-47czfz"><div><!></div></div></div></div>'),us=j('<div class="wrapper svelte-47czfz"><!> <div class="header svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="inner svelte-47czfz"><div><!></div></div></div></div>'),ps=j("<!> <!>",1);function ms(W,i){je(i,!0);const r=rr(),g=()=>sr(A,"$op",r);let s=L(i,"session",7),p=L(i,"user",15),h=L(i,"webIdData",15),u=Te(),U=S(void 0),b=S(m([])),$=Ie(()=>{var P;if((P=p().account_type)!=null&&P.startsWith("federated"))return e(b).filter(T=>T.id===p().auth_provider_id)[0]}),A=nr(1,{duration:100}),N=S(m(u.account.navInfo)),F=S(m(u.account.navInfo));function I(){A.set(0).then(()=>v(N,m(e(F)))).then(()=>A.set(1))}let D=Ie(()=>e(U)&&e(U)<500);ga(()=>{e(F)&&I()}),ia(()=>{e(F)===u.account.navLogout&&St()});var V=ps(),Y=ve(V);vr(Y,{id:Wt,get value(){return e(b)},set value(P){v(b,m(P))}});var J=n(Y,2);{var K=P=>{var T=ds(),Q=t(T);Ha(Q,{absolute:!0,absoluteRight:!0,updateBackend:!0});var G=n(Q,2),H=t(G),ee=t(H,!0);a(H),a(G);var ae=n(G,2),ue=t(ae);Za(ue,{get selected(){return e(F)},set selected(y){v(F,m(y))}});var O=n(ue,2),q=t(O),M=t(q);{var k=y=>{Ja(y,{get webIdData(){return h()},viewModePhone:!0,get providers(){return e(b)},get authProvider(){return e($)},get user(){return p()},set user(c){p(c)}})},x=y=>{var c=ke(),C=ve(c);{var o=f=>{Xa(f,{viewModePhone:!0,get user(){return p()},set user(R){p(R)}})},_=f=>{var R=ke(),te=ve(R);{var ne=pe=>{Qa(pe,{get user(){return p()},get authProvider(){return e($)},viewModePhone:!0})},he=pe=>{var we=ke(),ge=ve(we);{var $e=be=>{Ya(be,{get session(){return s()},get user(){return p()}})},qe=be=>{var E=ke(),le=ve(E);{var ce=de=>{et(de,{get webIdData(){return h()},set webIdData(B){h(B)}})},ye=de=>{var B=ke(),fe=ve(B);{var Ve=Ae=>{at(Ae,{get session(){return s()},set session(Me){s(Me)}})};z(fe,Ae=>{e(N)===u.account.devices&&Ae(Ve)},!0)}l(de,B)};z(le,de=>{e(N)==="WebID"?de(ce):de(ye,!1)},!0)}l(be,E)};z(ge,be=>{e(N)===u.account.navMfa?be($e):be(qe,!1)},!0)}l(pe,we)};z(te,pe=>{e(N)===u.common.password?pe(ne):pe(he,!1)},!0)}l(f,R)};z(C,f=>{e(N)===u.account.navEdit?f(o):f(_,!1)},!0)}l(y,c)};z(M,y=>{e(N)===u.account.navInfo?y(k):y(x,!1)})}a(q),a(O),a(ae),a(T),w(()=>{d(ee,u.account.account),_e(q,"style",`opacity: ${g()??""}`)}),l(P,T)},Z=P=>{var T=us(),Q=t(T);Ha(Q,{absolute:!0,updateBackend:!0});var G=n(Q,2),H=t(G),ee=t(H,!0);a(H),a(G);var ae=n(G,2),ue=t(ae),O=Ie(()=>!!h());Za(ue,{get showWebId(){return e(O)},get selected(){return e(F)},set selected(c){v(F,m(c))}});var q=n(ue,2),M=t(q),k=t(M);{var x=c=>{Ja(c,{get webIdData(){return h()},get providers(){return e(b)},get authProvider(){return e($)},get user(){return p()},set user(C){p(C)}})},y=c=>{var C=ke(),o=ve(C);{var _=R=>{Xa(R,{get user(){return p()},set user(te){p(te)}})},f=R=>{var te=ke(),ne=ve(te);{var he=we=>{Qa(we,{get user(){return p()},get authProvider(){return e($)}})},pe=we=>{var ge=ke(),$e=ve(ge);{var qe=E=>{Ya(E,{get session(){return s()},get user(){return p()}})},be=E=>{var le=ke(),ce=ve(le);{var ye=B=>{et(B,{get webIdData(){return h()},set webIdData(fe){h(fe)}})},de=B=>{var fe=ke(),Ve=ve(fe);{var Ae=Me=>{at(Me,{get session(){return s()},set session(la){s(la)}})};z(Ve,Me=>{e(N)===u.account.devices&&Me(Ae)},!0)}l(B,fe)};z(ce,B=>{e(N)==="WebID"?B(ye):B(de,!1)},!0)}l(E,le)};z($e,E=>{e(N)===u.account.navMfa?E(qe):E(be,!1)},!0)}l(we,ge)};z(ne,we=>{e(N)===u.common.password?we(he):we(pe,!1)},!0)}l(R,te)};z(o,R=>{e(N)===u.account.navEdit?R(_):R(f,!1)},!0)}l(c,C)};z(k,c=>{e(N)===u.account.navInfo?c(x):c(y,!1)})}a(M),a(q),a(ae),a(T),w(()=>{d(ee,u.account.account),_e(M,"style",`opacity: ${g()??""}`)}),l(P,T)};z(J,P=>{e(D)?P(K):P(Z,!1)})}ar("innerWidth",P=>v(U,m(P))),l(W,V),Ee()}function hs(W,i){je(i,!0);let r=Te(),g=S(void 0),s=S(void 0),p=S(void 0),h=S(!1);Ge(async()=>{let u=await Ot();if(u.ok){if(v(g,m(await u.json())),!e(g)){console.error("did not receive valid session response");return}u=await Bt(e(g).user_id),u.ok?v(s,m(await u.json())):Va("account"),u=await Ft(e(g).user_id),u.ok?v(p,m(await u.json())):u.status===404&&v(p,m({user_id:e(g).user_id,is_open:!1})),v(h,!0)}else Va("account")}),_t(u=>{w(()=>{var U;return $t.title=`${((r==null?void 0:r.account.account)||"Account")??""} ${((U=e(s))==null?void 0:U.email)??""}`})}),dr(W,{children:(u,U)=>{ur(u,{children:(b,$)=>{var A=ke(),N=ve(A);{var F=I=>{ms(I,{get session(){return e(g)},get user(){return e(s)},set user(D){v(s,m(D))},get webIdData(){return e(p)},set webIdData(D){v(p,m(D))}})};z(N,I=>{e(h)&&e(g)&&e(s)&&I(F)})}l(b,A)},$$slots:{default:!0}})},$$slots:{default:!0}}),Ee()}export{hs as component};
