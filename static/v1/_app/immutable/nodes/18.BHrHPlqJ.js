import{t as w,a as u,e as F,d as Ge}from"../chunks/DVyqXkF9.js";import{p as se,t as T,a as le,f as te,s as n,c as l,r as s,j as e,a5 as Z,a4 as Y,k as D,a2 as ue,a6 as he,l as o,a1 as ze,G as Oe}from"../chunks/DXTz3Rbt.js";import{s as S}from"../chunks/BLUcFBb0.js";import{i as B}from"../chunks/Dnzfvyee.js";import{e as Ae}from"../chunks/Dus-q-Em.js";import{s as ke,a as Te}from"../chunks/B28jQOFH.js";import{d as Fe,f as Ye,c as Je,b as Se}from"../chunks/QS8tP13U.js";import{C as He}from"../chunks/CL_mTQmm.js";import{N as Qe}from"../chunks/x_khJbtH.js";import{u as Xe}from"../chunks/B7bmE7Iz.js";import{N as Ze}from"../chunks/NPevBcaT.js";import{B as et}from"../chunks/CVyulMm_.js";import{p as j}from"../chunks/D54UoLP7.js";import{k as tt}from"../chunks/CR-rXziN.js";import{t as rt,s as at,B as ge}from"../chunks/BaLU91-Z.js";import{g as Ee}from"../chunks/Cx6cA6Ki.js";import{I as Ne}from"../chunks/COZs6rVX.js";import{F as Me}from"../chunks/BHicDA9d.js";import{u as ve}from"../chunks/T3uKKWzz.js";import{u as Ie}from"../chunks/pXVVLMtZ.js";import{L as $e}from"../chunks/BlWtnSFg.js";import{I as me}from"../chunks/BSsA32Jj.js";import{I as it}from"../chunks/llZdwLt7.js";import{a as ee,l as nt,g as ot}from"../chunks/DzmDou2k.js";import{I as O}from"../chunks/DVvDmFQc.js";import{h as _e}from"../chunks/CP6_I6cz.js";import{I as st}from"../chunks/BFELTQEF.js";import{E as lt}from"../chunks/BhqqWH90.js";import{T as dt}from"../chunks/Uvg4PFWU.js";import{C as ct}from"../chunks/CdgZ0Q70.js";import{O as ut}from"../chunks/sqKkxQfp.js";var vt=w('<img alt="No Logo Available">');function _t(q,i){se(i,!0);var t=vt();ke(t,"width",20),ke(t,"height",20),T(f=>ke(t,"src",f),[()=>`/auth/v1/providers/${i.providerId}/img?${Ee()}}`]),u(q,t),le()}var mt=w("<!> <!> <!> <!>",1);function qe(q,i){se(i,!0);let t=j(i,"issuer",15),f=j(i,"authorizationEndpoint",15),h=j(i,"tokenEndpoint",15),y=j(i,"userinfoEndpoint",15);var d=mt(),c=te(d);O(c,{autocomplete:"off",label:"Issuer URL",placeholder:"Issuer URL",required:!0,pattern:ee,get width(){return i.inputWidth},get disabled(){return i.disabled},get value(){return t()},set value(I){t(I)}});var x=n(c,2);O(x,{typ:"url",autocomplete:"off",label:"Authorization Endpoint",placeholder:"Authorization Endpoint",required:!0,pattern:ee,get width(){return i.inputWidth},get disabled(){return i.disabled},get value(){return f()},set value(I){f(I)}});var P=n(x,2);O(P,{typ:"url",autocomplete:"off",label:"Token Endpoint",placeholder:"Token Endpoint",required:!0,pattern:ee,get width(){return i.inputWidth},get disabled(){return i.disabled},get value(){return h()},set value(I){h(I)}});var r=n(P,2);O(r,{typ:"url",autocomplete:"off",label:"Userinfo Endpoint",placeholder:"Userinfo Endpoint",required:!0,pattern:ee,get width(){return i.inputWidth},get disabled(){return i.disabled},get value(){return y()},set value(I){y(I)}}),u(q,d),le()}var pt=w('<div class="desc svelte-6fcb3i"><h4 class="svelte-6fcb3i">ID token claim mappings</h4> <p class="svelte-6fcb3i"> </p> <p class="svelte-6fcb3i"><!></p> <p class="svelte-6fcb3i"><!></p> <p class="svelte-6fcb3i"><!></p> <p class="svelte-6fcb3i"><!></p> <p class="svelte-6fcb3i"><!></p></div>');function ft(q,i){se(i,!0);let t=ve();var f=pt(),h=n(l(f),2),y=l(h,!0);s(h);var d=n(h,2),c=l(d);_e(c,()=>t.providers.config.jsonPath.p2),s(d);var x=n(d,2),P=l(x);_e(P,()=>t.providers.config.jsonPath.p3),s(x);var r=n(x,2),I=l(r);_e(I,()=>t.providers.config.jsonPath.p4),s(r);var v=n(r,2),C=l(v);_e(C,()=>t.providers.config.jsonPath.p5),s(v);var E=n(v,2),_=l(E);_e(_,()=>t.providers.config.jsonPath.p6),s(E),s(f),T(()=>S(y,t.providers.config.jsonPath.p1)),u(q,f),le()}var ht=w('<div class="err"> </div>'),gt=w('<p class="desc svelte-1u8yru7"> </p> <!> <p class="desc svelte-1u8yru7"> </p> <!> <p class="desc svelte-1u8yru7"> </p> <!> <p class="desc svelte-1u8yru7"> </p> <!> <p><!></p> <div class="checkbox"><!></div> <div class="checkbox"><!></div> <!> <!> <p class="desc svelte-1u8yru7"> </p> <!> <!> <p class="desc svelte-1u8yru7"> </p> <!> <!>',1);function Ue(q,i){se(i,!0);let t=j(i,"scope",15),f=j(i,"name",15),h=j(i,"clientId",15),y=j(i,"clientSecret",15),d=j(i,"clientSecretBasic",15),c=j(i,"clientSecretPost",15),x=j(i,"adminClaimPath",15),P=j(i,"adminClaimValue",15),r=j(i,"mfaClaimPath",15),I=j(i,"mfaClaimValue",15),v=ve();var C=gt(),E=te(C),_=l(E,!0);s(E);var g=n(E,2);O(g,{autocomplete:"off",label:"Scope",placeholder:"openid profile email",required:!0,pattern:nt,get width(){return i.inputWidth},get value(){return t()},set value(b){t(b)}});var m=n(g,2),K=l(m,!0);s(m);var G=n(m,2);O(G,{autocomplete:"off",get label(){return v.providers.config.clientName},get placeholder(){return v.providers.config.clientName},required:!0,pattern:ot,get width(){return i.inputWidth},get value(){return f()},set value(b){f(b)}});var V=n(G,2),U=l(V,!0);s(V);var A=n(V,2);O(A,{autocomplete:"off",label:"Client ID",placeholder:"Client ID",required:!0,pattern:ee,get width(){return i.inputWidth},get value(){return h()},set value(b){h(b)}});var W=n(A,2),re=l(W,!0);s(W);var J=n(W,2);const ie=Z(()=>!i.usePKCE);st(J,{autocomplete:"off",label:"Client Secret",placeholder:"Client Secret",maxLength:256,get errMsg(){return v.providers.config.errConfidential},get required(){return e(ie)},get width(){return i.inputWidth},get value(){return y()},set value(b){y(b)}});var ne=n(J,2),L=l(ne);_e(L,()=>v.providers.config.descAuthMethod),s(ne);var R=n(ne,2),p=l(R);me(p,{ariaLabel:"client_secret_basic",get checked(){return d()},set checked(b){d(b)},children:(b,X)=>{Y();var Q=F("client_secret_basic");u(b,Q)},$$slots:{default:!0}}),s(R);var $=n(R,2),de=l($);me(de,{ariaLabel:"client_secret_post",get checked(){return c()},set checked(b){c(b)},children:(b,X)=>{Y();var Q=F("client_secret_post");u(b,Q)},$$slots:{default:!0}}),s($);var ae=n($,2);{var oe=b=>{var X=ht(),Q=l(X,!0);s(X),T(()=>S(Q,v.providers.config.errNoAuthMethod)),rt(3,X,()=>at,()=>({duration:150})),u(b,X)};B(ae,b=>{!i.usePKCE&&!d()&&!c()&&b(oe)})}var a=n(ae,2);ft(a,{});var N=n(a,2),M=l(N,!0);s(N);var ce=n(N,2);O(ce,{autocomplete:"off",get label(){return v.providers.config.pathAdminClaim},placeholder:"$.roles.*",pattern:ee,get width(){return i.inputWidth},get value(){return x()},set value(b){x(b)}});var be=n(ce,2);O(be,{autocomplete:"off",get label(){return v.providers.config.valueAdminClaim},placeholder:"rauthy_admin",pattern:ee,get width(){return i.inputWidth},get value(){return P()},set value(b){P(b)}});var pe=n(be,2),Pe=l(pe,!0);s(pe);var z=n(pe,2);O(z,{autocomplete:"off",get label(){return v.providers.config.pathMfaClaim},placeholder:"$.amr.*",pattern:ee,get width(){return i.inputWidth},get value(){return r()},set value(b){r(b)}});var H=n(z,2);O(H,{autocomplete:"off",get label(){return v.providers.config.valueMfaClaim},placeholder:"mfa",pattern:ee,get width(){return i.inputWidth},get value(){return I()},set value(b){I(b)}}),T(()=>{S(_,v.providers.config.descScope),S(K,v.providers.config.descClientName),S(U,v.providers.config.descClientId),S(re,v.providers.config.descClientSecret),S(M,v.providers.config.mapUser),S(Pe,v.providers.config.mapMfa)}),u(q,C),le()}var bt=w('<div class="svelte-jts2zb"><!></div>'),kt=w('<span class="err"> </span>'),Pt=w('<!> <div></div> <div class="checkbox svelte-jts2zb"><!></div> <!> <div class="checkbox svelte-jts2zb"><!></div> <!> <div class="logo svelte-jts2zb"><!> <!></div> <div class="flex gap-05"><!> <!> <!></div>',1),Ct=w('<div class="container svelte-jts2zb"><!></div>');function yt(q,i){se(i,!0);let t=j(i,"provider",15),f=Ie(),h=ve();const y="min(calc(100dvw - .5rem), 30rem)";let d=!1,c=D(""),x=D(!1),P=D(ue(Ee()));he(()=>{t().id&&(t(t().client_secret=t().client_secret||"",!0),t(t().admin_claim_path=t().admin_claim_path||"",!0),t(t().admin_claim_value=t().admin_claim_value||"",!0),t(t().mfa_claim_path=t().mfa_claim_path||"",!0),t(t().mfa_claim_value=t().mfa_claim_value||"",!0))}),he(()=>{t().scope&&t(t().scope=t().scope.replaceAll("+"," "),!0)});async function r(E,_){if(o(c,""),t().client_secret&&!(t().client_secret_basic||t().client_secret_post)){o(c,h.providers.config.errNoAuthMethod,!0);return}if(!t().use_pkce&&!t().client_secret){o(c,h.providers.config.errConfidential,!0);return}let g={name:t().name,typ:t().typ,enabled:t().enabled,issuer:t().issuer,authorization_endpoint:t().authorization_endpoint,token_endpoint:t().token_endpoint,userinfo_endpoint:t().userinfo_endpoint,use_pkce:t().use_pkce,client_secret_basic:t().client_secret_basic,client_secret_post:t().client_secret_post,client_id:t().client_id,client_secret:t().client_secret||void 0,scope:t().scope.trim(),admin_claim_path:t().admin_claim_path||void 0,admin_claim_value:t().admin_claim_value||void 0,mfa_claim_path:t().mfa_claim_path||void 0,mfa_claim_value:t().mfa_claim_value||void 0},m=await Fe(E.action,g);m.error?o(c,m.error.message,!0):(o(x,!0),i.onSave(),setTimeout(()=>{o(x,!1)},3e3))}var I=Ct(),v=l(I);const C=Z(()=>`/auth/v1/providers/${t().id}`);Me(v,{get action(){return e(C)},onSubmit:r,children:(E,_)=>{var g=Pt(),m=te(g);$e(m,{label:"ID",mono:!0,children:(a,N)=>{Y();var M=F();T(()=>S(M,t().id)),u(a,M)},$$slots:{default:!0}});var K=n(m,2);Te(K,"",{},{height:".15rem"});var G=n(K,2),V=l(G);me(V,{get ariaLabel(){return h.common.enabled},get checked(){return t().enabled},set checked(a){t(t().enabled=a,!0)},children:(a,N)=>{Y();var M=F();T(()=>S(M,h.common.enabled)),u(a,M)},$$slots:{default:!0}}),s(G);var U=n(G,2);qe(U,{inputWidth:y,get issuer(){return t().issuer},set issuer(a){t(t().issuer=a,!0)},get authorizationEndpoint(){return t().authorization_endpoint},set authorizationEndpoint(a){t(t().authorization_endpoint=a,!0)},get tokenEndpoint(){return t().token_endpoint},set tokenEndpoint(a){t(t().token_endpoint=a,!0)},get userinfoEndpoint(){return t().userinfo_endpoint},set userinfoEndpoint(a){t(t().userinfo_endpoint=a,!0)}});var A=n(U,2),W=l(A);me(W,{ariaLabel:"PKCE",get checked(){return t().use_pkce},set checked(a){t(t().use_pkce=a,!0)},children:(a,N)=>{Y();var M=F("PKCE");u(a,M)},$$slots:{default:!0}}),s(A);var re=n(A,2);Ue(re,{get usePKCE(){return t().use_pkce},inputWidth:y,get scope(){return t().scope},set scope(a){t(t().scope=a,!0)},get name(){return t().name},set name(a){t(t().name=a,!0)},get clientId(){return t().client_id},set clientId(a){t(t().client_id=a,!0)},get clientSecret(){return t().client_secret},set clientSecret(a){t(t().client_secret=a,!0)},get clientSecretBasic(){return t().client_secret_basic},set clientSecretBasic(a){t(t().client_secret_basic=a,!0)},get clientSecretPost(){return t().client_secret_post},set clientSecretPost(a){t(t().client_secret_post=a,!0)},get adminClaimPath(){return t().admin_claim_path},set adminClaimPath(a){t(t().admin_claim_path=a,!0)},get adminClaimValue(){return t().admin_claim_value},set adminClaimValue(a){t(t().admin_claim_value=a,!0)},get mfaClaimPath(){return t().mfa_claim_path},set mfaClaimPath(a){t(t().mfa_claim_path=a,!0)},get mfaClaimValue(){return t().mfa_claim_value},set mfaClaimValue(a){t(t().mfa_claim_value=a,!0)}});var J=n(re,2),ie=l(J);tt(ie,()=>e(P),a=>{var N=bt(),M=l(N);_t(M,{get providerId(){return t().id}}),s(N),u(a,N)});var ne=n(ie,2);const L=Z(()=>`/auth/v1/providers/${t().id}/img`);it(ne,{method:"PUT",get url(){return e(L)},fileName:"logo",onSuccess:()=>o(P,Ee(),!0)}),s(J);var R=n(J,2),p=l(R);ge(p,{type:"submit",get isLoading(){return d},children:(a,N)=>{Y();var M=F();T(()=>S(M,f.common.save)),u(a,M)},$$slots:{default:!0}});var $=n(p,2);{var de=a=>{Ne(a,{})};B($,a=>{e(x)&&a(de)})}var ae=n($,2);{var oe=a=>{var N=kt(),M=l(N,!0);s(N),T(()=>S(M,e(c))),u(a,N)};B(ae,a=>{e(c)&&a(oe)})}s(R),u(E,g)},$$slots:{default:!0}}),s(I),u(q,I),le()}var xt=w('<div class="user svelte-1vu6qeb"> <span class="muted font-mono svelte-1vu6qeb"> </span></div>'),St=w('<div class="forceDelete svelte-1vu6qeb"> </div>'),Et=w('<p class="err"><b> </b></p> <p> </p> <!> <p> </p> <!> <!>',1),It=w("<p> </p> <!>",1),wt=w('<div class="err"> </div>'),Lt=w('<div class="container svelte-1vu6qeb"><!> <!></div>');function zt(q,i){se(i,!0);let t=Ie(),f=ve(),h=D(!0),y=D(""),d=D(!1),c=D(ue([]));ze(async()=>{let _=await Ye(`/auth/v1/providers/${i.provider.id}/delete_safe`);_.status===406&&_.error&&o(c,_.error,!0),o(h,!1)});async function x(){o(y,""),o(h,!0);let _=await Je(`/auth/v1/providers/${i.provider.id}`);_.error?o(y,_.error.message,!0):i.onSave(),o(h,!1)}var P=Lt(),r=l(P);{var I=_=>{var g=Et(),m=te(g),K=l(m),G=l(K,!0);s(K),s(m);var V=n(m,2),U=l(V,!0);s(V);var A=n(V,2);lt(A,{summary:p=>{Y();var $=F();T(()=>S($,f.providers.delete.linkedUsers)),u(p,$)},details:p=>{var $=Ge(),de=te($);Ae(de,17,()=>e(c),ae=>ae.id,(ae,oe)=>{var a=xt(),N=l(a),M=n(N),ce=l(M);s(M),s(a),T(()=>{S(N,`${e(oe).email??""} `),S(ce,`/ ${e(oe).id??""}`)}),u(ae,a)}),u(p,$)},$$slots:{summary:!0,details:!0}});var W=n(A,2),re=l(W,!0);s(W);var J=n(W,2);me(J,{get ariaLabel(){return f.providers.delete.forceDelete},get checked(){return e(d)},set checked(L){o(d,L,!0)},children:(L,R)=>{var p=St(),$=l(p,!0);s(p),T(()=>S($,f.providers.delete.forceDelete)),u(L,p)},$$slots:{default:!0}});var ie=n(J,2);{var ne=L=>{ge(L,{level:-1,onclick:x,get isLoading(){return e(h)},children:(R,p)=>{Y();var $=F();T(()=>S($,t.common.delete)),u(R,$)},$$slots:{default:!0}})};B(ie,L=>{e(d)&&L(ne)})}T(()=>{S(G,f.providers.delete.isInUse1),S(U,f.providers.delete.isInUse2),S(re,f.providers.delete.areYouSure)}),u(_,g)},v=_=>{var g=It(),m=te(g),K=l(m,!0);s(m);var G=n(m,2);ge(G,{level:-1,onclick:x,get isLoading(){return e(h)},children:(V,U)=>{Y();var A=F();T(()=>S(A,t.common.delete)),u(V,A)},$$slots:{default:!0}}),T(()=>S(K,f.providers.delete.areYouSure)),u(_,g)};B(r,_=>{e(c).length>0?_(I):_(v,!1)})}var C=n(r,2);{var E=_=>{var g=wt(),m=l(g,!0);s(g),T(()=>S(m,e(y))),u(_,g)};B(C,_=>{e(y)&&_(E)})}s(P),u(q,P),le()}var At=w('<div class="flex"><!></div> <!>',1);function Tt(q,i){se(i,!0);let t=j(i,"provider",15),f=j(i,"onSave",15),h=ve();const y=[h.tabs.config,h.tabs.delete];let d=D(ue(y[0]));var c=At(),x=te(c),P=l(x);dt(P,{tabs:y,get selected(){return e(d)},set selected(C){o(d,C,!0)}}),s(x);var r=n(x,2);{var I=C=>{yt(C,{get provider(){return t()},set provider(E){t(E)},get onSave(){return f()},set onSave(E){f(E)}})},v=(C,E)=>{{var _=g=>{zt(g,{get provider(){return t()},get onSave(){return f()},set onSave(m){f(m)}})};B(C,g=>{e(d)===h.tabs.delete&&g(_)},E)}};B(r,C=>{e(d)===h.tabs.config?C(I):C(v,!1)})}u(q,c),le()}var Nt=w('<!> <div class="checkbox svelte-qeky4o"><!></div> <!>',1),Mt=w('<div class="err"> </div>'),$t=w('<!> <div class="flex gap-05"><!> <!> <!> <!></div>',1),qt=w('<div class="container svelte-qeky4o"><!> <div></div> <!></div>');function Ut(q,i){se(i,!0);let t=Ie(),f=ve();const h="min(calc(100dvw - 1.75rem), 30rem)";let y=D(!1),d=D(""),c=D(!1),x=D(!1),P=D(ue({issuer:"",metadata_url:""})),r=D(ue({enabled:!0,typ:"oidc",issuer:"",authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,name:"",client_id:"",client_secret:"",scope:"",admin_claim_path:"",admin_claim_value:"",mfa_claim_path:"",mfa_claim_value:""})),I=["OIDC","Auto","Custom","Github","Google"],v=D(ue(I[0])),C=Z(()=>e(v)==="Auto"),E=Z(()=>e(v)==="Custom"),_=Z(()=>e(v)==="OIDC"),g=Z(()=>!e(C)&&!e(E)&&!e(_)),m=Z(()=>!(e(g)||e(E)||e(c)));const K="/auth/v1/providers/lookup";let G=Z(()=>e(m)?K:"/auth/v1/providers/create");he(()=>{if(e(v))switch(o(c,!1),o(P,{issuer:"",metadata_url:""},!0),e(v)){case"Github":o(r,{enabled:!0,issuer:"github.com",typ:"github",authorization_endpoint:"https://github.com/login/oauth/authorize",token_endpoint:"https://github.com/login/oauth/access_token",client_secret_basic:!0,client_secret_post:!0,userinfo_endpoint:"https://api.github.com/user",use_pkce:!1,name:"Github",client_id:"",client_secret:"",scope:"user:email",admin_claim_path:"",admin_claim_value:"",mfa_claim_path:"$.two_factor_authentication",mfa_claim_value:"true"},!0),o(c,!0);break;case"Google":o(P,{issuer:"accounts.google.com",metadata_url:""},!0),Oe(()=>{A(K)});break;default:o(r,{enabled:!0,issuer:"",typ:"oidc",authorization_endpoint:"",token_endpoint:"",client_secret_basic:!0,client_secret_post:!1,userinfo_endpoint:"",use_pkce:!0,name:"",client_id:"",client_secret:"",scope:"",admin_claim_path:"",admin_claim_value:"",mfa_claim_path:"",mfa_claim_value:""},!0)}}),he(()=>{e(x)&&setTimeout(()=>{i.onSave(),W()},1500)});async function V(L,R){e(m)?await A(L.action):await U(L.action)}async function U(L){if(e(r).client_secret&&!(e(r).client_secret_basic||e(r).client_secret_post)){o(d,f.providers.config.errNoAuthMethod,!0);return}if(!e(r).use_pkce&&!e(r).client_secret){o(d,f.providers.config.errConfidential,!0);return}o(d,""),o(y,!0);let R={name:e(r).name,typ:e(C)?"custom":e(v).toLowerCase(),enabled:e(r).enabled,issuer:e(r).issuer,authorization_endpoint:e(r).authorization_endpoint,token_endpoint:e(r).token_endpoint,userinfo_endpoint:e(r).userinfo_endpoint,use_pkce:e(r).use_pkce,client_secret_basic:e(r).client_secret_basic,client_secret_post:e(r).client_secret_post,client_id:e(r).client_id,client_secret:e(r).client_secret,scope:e(r).scope.trim(),admin_claim_path:e(r).admin_claim_path||void 0,admin_claim_value:e(r).admin_claim_value||void 0,mfa_claim_path:e(r).mfa_claim_path||void 0,mfa_claim_value:e(r).mfa_claim_value||void 0},p=await Se(L,R);p.error?p.error.message.includes("InvalidCertificate")?o(d,"Insecure connection not allowed"):o(d,p.error.message,!0):o(x,!0),o(y,!1)}async function A(L){if(!e(P).issuer&&!e(P).metadata_url){o(d,"Provide at least one of Issuer / Metadata URL");return}o(d,""),o(y,!0);let R={issuer:e(P).issuer||void 0,metadata_url:e(P).metadata_url||void 0},p=await Se(L,R);p.body?(e(r).issuer=p.body.issuer,e(r).authorization_endpoint=p.body.authorization_endpoint,e(r).token_endpoint=p.body.token_endpoint,e(r).userinfo_endpoint=p.body.userinfo_endpoint,e(r).client_secret_basic=p.body.client_secret_basic,e(r).client_secret_post=p.body.client_secret_post,e(r).use_pkce=p.body.use_pkce,e(r).client_secret_basic=p.body.client_secret_basic,e(r).client_secret_post=!p.body.client_secret_basic&&p.body.client_secret_post,e(r).scope=p.body.scope,o(c,!0)):p.error&&(p.error.message.includes("InvalidCertificate")?o(d,"Insecure connection not allowed"):o(d,p.error.message,!0)),o(y,!1)}function W(){o(P,{issuer:"",metadata_url:""},!0),o(r,{enabled:!0,issuer:"",typ:"oidc",authorization_endpoint:"",token_endpoint:"",userinfo_endpoint:"",use_pkce:!0,name:"",client_id:"",client_secret_basic:!0,client_secret_post:!1,scope:"",admin_claim_path:"",admin_claim_value:"",mfa_claim_path:"",mfa_claim_value:""},!0),o(x,!1),o(c,!1)}var re=qt(),J=l(re);ut(J,{ariaLabel:"Select Mode",options:I,get value(){return e(v)},set value(L){o(v,L,!0)}});var ie=n(J,2);Te(ie,"",{},{height:".5rem"});var ne=n(ie,2);Me(ne,{get action(){return e(G)},onSubmit:V,children:(L,R)=>{var p=$t(),$=te(p);{var de=z=>{O(z,{name:"issuer",label:"Issuer URL",placeholder:"Issuer URL",width:h,required:!0,pattern:ee,get value(){return e(P).issuer},set value(H){e(P).issuer=H}})},ae=(z,H)=>{{var b=Q=>{O(Q,{typ:"url",name:"metadata",label:"Metadata URL",placeholder:".../.well-known/openid-configuration",width:h,required:!0,pattern:ee,get value(){return e(P).metadata_url},set value(Ce){e(P).metadata_url=Ce}})},X=(Q,Ce)=>{{var De=ye=>{var we=Nt(),Le=te(we);qe(Le,{inputWidth:h,get disabled(){return e(c)},get issuer(){return e(r).issuer},set issuer(k){e(r).issuer=k},get authorizationEndpoint(){return e(r).authorization_endpoint},set authorizationEndpoint(k){e(r).authorization_endpoint=k},get tokenEndpoint(){return e(r).token_endpoint},set tokenEndpoint(k){e(r).token_endpoint=k},get userinfoEndpoint(){return e(r).userinfo_endpoint},set userinfoEndpoint(k){e(r).userinfo_endpoint=k}});var xe=n(Le,2),Ve=l(xe);{var We=k=>{$e(k,{label:"PKCE",children:(fe,Ke)=>{ct(fe,{get checked(){return e(r).use_pkce}})},$$slots:{default:!0}})},je=k=>{me(k,{ariaLabel:"PKCE",get checked(){return e(r).use_pkce},set checked(fe){e(r).use_pkce=fe},children:(fe,Ke)=>{Y();var Re=F("PKCE");u(fe,Re)},$$slots:{default:!0}})};B(Ve,k=>{e(c)?k(We):k(je,!1)})}s(xe);var Be=n(xe,2);Ue(Be,{get usePKCE(){return e(r).use_pkce},inputWidth:h,get scope(){return e(r).scope},set scope(k){e(r).scope=k},get name(){return e(r).name},set name(k){e(r).name=k},get clientId(){return e(r).client_id},set clientId(k){e(r).client_id=k},get clientSecret(){return e(r).client_secret},set clientSecret(k){e(r).client_secret=k},get clientSecretBasic(){return e(r).client_secret_basic},set clientSecretBasic(k){e(r).client_secret_basic=k},get clientSecretPost(){return e(r).client_secret_post},set clientSecretPost(k){e(r).client_secret_post=k},get adminClaimPath(){return e(r).admin_claim_path},set adminClaimPath(k){e(r).admin_claim_path=k},get adminClaimValue(){return e(r).admin_claim_value},set adminClaimValue(k){e(r).admin_claim_value=k},get mfaClaimPath(){return e(r).mfa_claim_path},set mfaClaimPath(k){e(r).mfa_claim_path=k},get mfaClaimValue(){return e(r).mfa_claim_value},set mfaClaimValue(k){e(r).mfa_claim_value=k}}),u(ye,we)};B(Q,ye=>{(e(g)||e(E)||e(c))&&ye(De)},Ce)}};B(z,Q=>{e(C)&&!e(c)?Q(b):Q(X,!1)},H)}};B($,z=>{e(_)&&!e(c)?z(de):z(ae,!1)})}var oe=n($,2),a=l(oe);ge(a,{type:"submit",get isLoading(){return e(y)},children:(z,H)=>{Y();var b=F();T(()=>S(b,e(m)?f.providers.config.lookup:t.common.save)),u(z,b)},$$slots:{default:!0}});var N=n(a,2);{var M=z=>{ge(z,{level:3,onclick:W,get isLoading(){return e(y)},children:(H,b)=>{Y();var X=F();T(()=>S(X,f.common.reset)),u(H,X)},$$slots:{default:!0}})};B(N,z=>{e(m)||z(M)})}var ce=n(N,2);{var be=z=>{Ne(z,{})};B(ce,z=>{e(x)&&z(be)})}var pe=n(ce,2);{var Pe=z=>{var H=Mt(),b=l(H,!0);s(H),T(()=>S(b,e(d))),u(z,H)};B(pe,z=>{e(d)&&z(Pe)})}s(oe),u(L,p)},$$slots:{default:!0}}),s(re),u(q,re),le()}var Dt=w('<div class="providersList svelte-1gn8otg"></div>'),Vt=w('<div class="err"> </div>'),Wt=w('<div id="federation"><!></div> <!>',1),jt=w("<!> <!>",1);function Bt(q,i){se(i,!0);let t=ve(),f=D(void 0),h=Xe("pid"),y=D(""),d=D(ue([])),c=D(void 0);ze(()=>{x()}),he(()=>{o(c,e(d).find(C=>C.id===h.get()),!0)});async function x(){let C=await Se("/auth/v1/providers");C.body?o(d,C.body,!0):o(y,C.error?.message||"Error",!0)}function P(){h.set(void 0),e(f)?.(),x()}var r=jt(),I=te(r);Qe(I,{width:"11rem",buttonTilesAriaControls:"federation",paddingTop:"6.65rem",buttonTiles:E=>{var _=Dt();Ae(_,21,()=>e(d),g=>g.id,(g,m,K,G)=>{const V=Z(()=>h.get()===e(m).id);Ze(g,{onclick:()=>h.set(e(m).id),get selected(){return e(V)},children:(U,A)=>{Y();var W=F();T(()=>S(W,e(m).name)),u(U,W)}})}),s(_),u(E,_)},children:(E,_)=>{const g=Z(()=>e(d).length===0?1:2);et(E,{get level(){return e(g)},get closeModal(){return e(f)},set closeModal(m){o(f,m,!0)},children:(m,K)=>{Ut(m,{onSave:P})},$$slots:{default:!0}})},$$slots:{buttonTiles:!0,default:!0}});var v=n(I,2);He(v,{children:(C,E)=>{var _=Wt(),g=te(_),m=l(g);{var K=U=>{Tt(U,{onSave:x,get provider(){return e(c)},set provider(A){o(c,A,!0)}})};B(m,U=>{e(c)&&U(K)})}s(g);var G=n(g,2);{var V=U=>{var A=Vt(),W=l(A,!0);s(A),T(()=>S(W,e(y))),u(U,A)};B(G,U=>{e(y)&&U(V)})}T(()=>ke(g,"aria-label",t.common.details)),u(C,_)}}),u(q,r),le()}function kr(q){Bt(q,{})}export{kr as component};
