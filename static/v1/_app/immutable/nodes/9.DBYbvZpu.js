import{t as _,a as s,e as se,d as ie}from"../chunks/DiP_w2ew.js";import{p as Pe,k as d,a2 as B,a1 as ke,a6 as le,f as D,t as T,a as Te,s as u,j as e,l as t,a4 as K,c,a5 as we,r as f,a7 as je}from"../chunks/C0XrmWuC.js";import{s as w}from"../chunks/D9PF6UkP.js";import{i as Q}from"../chunks/656WzJtY.js";import{e as ne}from"../chunks/CJENaP9_.js";import{a as ye}from"../chunks/1ZS0qFRG.js";import{O as Ce}from"../chunks/Tc1XJeMx.js";import{B as X}from"../chunks/Buvqu-RJ.js";import{I as Be}from"../chunks/yQnwIU9m.js";import{y as De,j as Me}from"../chunks/Cx6cA6Ki.js";import{u as Ee}from"../chunks/CIAGEtKU.js";import{u as Fe}from"../chunks/TwEUzhIy.js";import{I as Se}from"../chunks/wCTsFQ3e.js";import{f as ve,a as Ae}from"../chunks/HguhFfd2.js";import{I as Oe}from"../chunks/CPhdr6bb.js";import{f as Ve,b as Le,d as Ne}from"../chunks/DMieIo7a.js";import{C as Ue}from"../chunks/Bm0BZ32G.js";import{B as qe}from"../chunks/CocMgBlr.js";import{c as ze}from"../chunks/DzmDou2k.js";import{F as Ge}from"../chunks/CGfBumSq.js";import{T as de}from"../chunks/CIpexSXt.js";import{P as Re}from"../chunks/YgjLjcCp.js";var We=_('<!> <!> <div></div> <!> <div class="err"> </div>',1),He=_('<div class="addNew svelte-13jnihd"><!></div>'),Je=_("<div> </div>"),Ke=_('<div class="ip svelte-13jnihd"><!></div>'),Qe=_('<div class="delete svelte-13jnihd"><!></div>'),Xe=_('<div class="blacklisted svelte-13jnihd"><!> <div class="date svelte-13jnihd"> </div> <!></div>'),Ye=_('<div class="blacklist svelte-13jnihd"><!></div>'),Ze=_('<div class="top svelte-13jnihd"><!> <!></div> <div id="blacklist"><!></div> <!>',1),et=_(" <!>",1);function tt(A,me){Pe(me,!0);let O=Ee(),pe=Fe();const Y=30;let V=d(void 0),L=d(void 0),N=d(""),M=d(""),x=d(B([])),j=d(B([])),U=d(B([])),E=d(""),q=d(B(ve())),z=d(B(Ae())),G=d(""),Z=["IP"];ke(()=>{R()}),le(()=>{e(V)?.focus()}),le(()=>{let a=e(G).toLowerCase();a?t(j,e(x).filter(h=>h.ip?.includes(a)),!0):t(j,e(x),!0)});async function R(){let a=await Ve("/auth/v1/blacklist");a.body?t(x,a.body.ips,!0):t(N,a.error?.message||"Error",!0)}async function ue(a,h){t(M,"");let I=De(e(q),e(z));if(!I){t(M,"Invalid Date Input: User Expires");return}let g={ip:e(E),exp:I},$=await Le(a.action,g);$.error?t(M,$.error.message,!0):(t(E,""),e(L)?.(),await R())}async function ce(a){let h=await Ne(`/auth/v1/blacklist/${a}`);h.error?t(N,h.error.message,!0):await R()}function fe(a,h){let I=h==="up";a===Z[0]&&e(x).sort((g,$)=>I?g.ip.localeCompare($.ip):$.ip.localeCompare(g.ip))}K();var ee=et(),te=D(ee),_e=u(te);Ue(_e,{children:(a,h)=>{var I=Ze(),g=D(I),$=c(g);Ce($,{orderOptions:Z,onChangeOrder:fe,searchWidth:"min(15.75rem, calc(100dvw - 1rem))",get value(){return e(G)},set value(r){t(G,r,!0)}});var he=u($,2);qe(he,{level:1,get closeModal(){return e(L)},set closeModal(r){t(L,r,!0)},children:(r,i)=>{var b=He(),H=c(b);Ge(H,{action:"/auth/v1/blacklist",onSubmit:ue,children:(J,re)=>{var n=We(),o=D(n);Be(o,{autocomplete:"off",label:"IP",placeholder:"IPv4",errMsg:"IPv4",required:!0,maxLength:15,pattern:ze,get ref(){return e(V)},set ref(v){t(V,v,!0)},get value(){return e(E)},set value(v){t(E,v,!0)}});var m=u(o,2);const l=we(ve);Se(m,{label:"Expiry",get min(){return e(l)},withTime:!0,get value(){return e(q)},set value(v){t(q,v,!0)},get timeValue(){return e(z)},set timeValue(v){t(z,v,!0)}});var p=u(m,2);ye(p,"",{},{height:".5rem"});var F=u(p,2);X(F,{type:"submit",children:(v,k)=>{K();var y=se();T(()=>w(y,O.common.save)),s(v,y)},$$slots:{default:!0}});var S=u(F,2),P=c(S,!0);f(S),T(()=>w(P,e(M))),s(J,n)},$$slots:{default:!0}}),f(b),s(r,b)},$$slots:{default:!0}}),f(g);var W=u(g,2),ge=c(W);{var $e=r=>{var i=Je(),b=c(i,!0);f(i),T(()=>w(b,pe.common.noEntries)),s(r,i)},be=r=>{var i=Ye();const b=(n,o=je)=>{var m=Xe(),l=c(m);X(l,{invisible:!0,onclick:()=>navigator.clipboard.writeText(o().ip),children:(P,v)=>{var k=Ke(),y=c(k);de(y,{get text(){return O.common.copyToClip},children:(C,ae)=>{K();var oe=se();T(()=>w(oe,o().ip)),s(C,oe)},$$slots:{default:!0}}),f(k),s(P,k)},$$slots:{default:!0}});var p=u(l,2),F=c(p,!0);f(p);var S=u(p,2);X(S,{invisible:!0,onclick:()=>ce(o().ip),children:(P,v)=>{de(P,{get text(){return O.common.delete},children:(k,y)=>{var C=Qe(),ae=c(C);Oe(ae,{width:"1.25rem"}),f(C),s(k,C)},$$slots:{default:!0}})},$$slots:{default:!0}}),f(m),T(P=>w(F,P),[()=>Me(o().exp)]),s(n,m)};var H=c(i);{var J=n=>{var o=ie(),m=D(o);ne(m,17,()=>e(U),l=>l.ip,(l,p)=>{b(l,()=>e(p))}),s(n,o)},re=n=>{var o=ie(),m=D(o);ne(m,17,()=>e(j),l=>l.ip,(l,p)=>{b(l,()=>e(p))}),s(n,o)};Q(H,n=>{e(x).length>Y?n(J):n(re,!1)})}f(i),s(r,i)};Q(ge,r=>{e(x).length===0?r($e):r(be,!1)})}f(W);var xe=u(W,2);{var Ie=r=>{Re(r,{pageSize:30,get items(){return e(j)},set items(i){t(j,i,!0)},get itemsPaginated(){return e(U)},set itemsPaginated(i){t(U,i,!0)}})};Q(xe,r=>{e(x).length>Y&&r(Ie)})}s(a,I)}}),T(()=>w(te,`${e(N)??""} `)),s(A,ee),Te()}function kt(A){tt(A,{})}export{kt as component};
