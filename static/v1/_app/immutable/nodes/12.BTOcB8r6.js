import{t as m,a as c,e as te}from"../chunks/DVyqXkF9.js";import{p as ae,k as u,a2 as re,a1 as se,f as q,t as f,a as oe,s,c as r,l as n,r as a,j as p,a4 as ie}from"../chunks/DXTz3Rbt.js";import{s as o}from"../chunks/BLUcFBb0.js";import{i as w}from"../chunks/Dnzfvyee.js";import{e as ne,i as pe}from"../chunks/Dus-q-Em.js";import{B as ve}from"../chunks/BaLU91-Z.js";import{I as le}from"../chunks/COZs6rVX.js";import{f as ce,b as ue}from"../chunks/DMieIo7a.js";import{u as fe}from"../chunks/T3uKKWzz.js";import{O as me}from"../chunks/sqKkxQfp.js";var de=m('<li class="font-mono"> </li>'),_e=m('<p> </p> <!> <div class="btn flex gap-05 svelte-lxghyr"><!> <!></div>',1),ye=m('<p class="err"> </p>'),ge=m('<div class="err"> </div>'),xe=m('<h3> </h3> <p> </p> <p> </p> <p><span class="font-label"> </span> <span class="active font-mono svelte-lxghyr"> </span></p> <p> </p> <ul></ul> <p> </p> <!> <!>',1);function he(x,z){ae(z,!0);let v=fe(),d=u(""),_=u(!0),B=u(""),y=u(""),g=u(re([])),h=u(!1);se(async()=>{let e=await ce("/auth/v1/encryption/keys");e.body?(n(g,e.body.keys,!0),n(B,e.body.active,!0),n(y,e.body.active,!0)):n(d,e.error?.message||"Error",!0),n(_,!1)});async function D(){n(_,!0);let e={key_id:p(y)},t=await ue("/auth/v1/encryption/migrate",e);t.error?n(d,t.error.message,!0):(n(h,!0),setTimeout(()=>{n(h,!1)},4e3)),n(_,!1)}var E=xe(),K=q(E),F=r(K,!0);a(K);var b=s(K,2),H=r(b,!0);a(b);var k=s(b,2),J=r(k,!0);a(k);var $=s(k,2),A=r($),Q=r(A);a(A);var O=s(A,2),R=r(O,!0);a(O),a($);var I=s($,2),S=r(I);a(I);var L=s(I,2);ne(L,21,()=>p(g),pe,(e,t)=>{var i=de(),T=r(i,!0);a(i),f(()=>o(T,p(t))),c(e,i)}),a(L);var P=s(L,2),U=r(P,!0);a(P);var j=s(P,2);{var V=e=>{var t=_e(),i=q(t),T=r(i);a(i);var C=s(i,2);me(C,{get ariaLabel(){return v.docs.encKeys.migrateToKey},get options(){return p(g)},get value(){return p(y)},set value(l){n(y,l,!0)}});var G=s(C,2),M=r(G);ve(M,{onclick:D,get isLoading(){return p(_)},children:(l,Ke)=>{ie();var N=te();f(()=>o(N,v.docs.encKeys.migrate)),c(l,N)},$$slots:{default:!0}});var Z=s(M,2);{var ee=l=>{le(l,{})};w(Z,l=>{p(h)&&l(ee)})}a(G),f(()=>o(T,`${v.docs.encKeys.migrateToKey??""}:`)),c(e,t)},W=e=>{var t=ye(),i=r(t,!0);a(t),f(()=>o(i,v.docs.encKeys.pNotPossible)),c(e,t)};w(j,e=>{p(g).length>1?e(V):e(W,!1)})}var X=s(j,2);{var Y=e=>{var t=ge(),i=r(t,!0);a(t),f(()=>o(i,p(d))),c(e,t)};w(X,e=>{p(d)&&e(Y)})}f(()=>{o(F,v.docs.encKeys.header),o(H,v.docs.encKeys.p1),o(J,v.docs.encKeys.p2),o(Q,`${v.docs.encKeys.keyActive??""}:`),o(R,p(B)),o(S,`${v.docs.encKeys.keysAvailable??""}:`),o(U,v.docs.encKeys.p3)}),c(x,E),oe()}function Ee(x){he(x,{})}export{Ee as component};
