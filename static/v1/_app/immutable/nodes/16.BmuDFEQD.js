import{t as A,a as x}from"../chunks/DVyqXkF9.js";import{p as W,k as i,a2 as u,a6 as k,a as X,j as e,l as o,c as f,s as c,r as m}from"../chunks/DXTz3Rbt.js";import{i as Z}from"../chunks/Dnzfvyee.js";import{e as $}from"../chunks/Dus-q-Em.js";import{E as P,z as ee}from"../chunks/Cx6cA6Ki.js";import{E as te}from"../chunks/BoOygQRH.js";import{b as re}from"../chunks/QS8tP13U.js";import{O as F}from"../chunks/sqKkxQfp.js";import{u as ae}from"../chunks/T3uKKWzz.js";import{I as j}from"../chunks/AGQ0LC6s.js";import{f as se,a as oe,b as z}from"../chunks/HguhFfd2.js";import{O as le}from"../chunks/99krErCG.js";import{C as ie}from"../chunks/CL_mTQmm.js";var ne=A('<div class="row svelte-18y81oq">No events found</div>'),ve=A('<div class="eventsList svelte-18y81oq"></div>'),ue=A('<div id="archive"><!> <div class="row svelte-18y81oq"><!> <!></div> <div class="filters svelte-18y81oq"><div class="level svelte-18y81oq"><!></div> <div class="typ svelte-18y81oq"><!></div></div> <!></div>');function me(L,B){W(B,!0);let h=ae(),v=i(u([])),p=i(u([])),b=i(u(se())),O=i(u(oe())),y=i(""),_=i("--:--"),w=i("info"),g=i(u(P[0])),T=["IP","Content"],C=i(u(T[0])),D=i(""),E=["Timestamp","Level","Type"];k(()=>{R()}),k(()=>{let a=e(D).toLowerCase();a?e(C)===T[0]?o(p,e(v).filter(l=>l.ip?.includes(a)),!0):e(C)===T[1]&&o(p,e(v).filter(l=>l.typ?.toLowerCase().includes(a)||l.text?.toLowerCase().includes(a)),!0):o(p,e(v),!0)});async function R(){let a=z(e(b),e(O));if(!a){console.error("from ts invalid",a);return}let l;e(y)&&e(_)&&(l=z(e(y),e(_)));let n={from:a,until:l,level:e(w),typ:e(g)!==P[0]?e(g):void 0},r=await re("/auth/v1/events",n);r.body?o(v,r.body,!0):console.error(r.error)}function Y(a,l){let n=l==="up";a===E[0]?e(v).sort((r,s)=>n?r.timestamp-s.timestamp:s.timestamp-r.timestamp):a===E[1]?e(v).sort((r,s)=>n?r.level.localeCompare(s.level):s.level.localeCompare(r.level)):a===E[2]&&e(v).sort((r,s)=>n?r.typ.localeCompare(s.typ):s.typ.localeCompare(r.typ))}ie(L,{children:(a,l)=>{var n=ue(),r=f(n);le(r,{searchOptions:T,orderOptions:E,onChangeOrder:Y,firstDirReverse:!0,get searchOption(){return e(C)},set searchOption(t){o(C,t,!0)},get value(){return e(D)},set value(t){o(D,t,!0)}});var s=c(r,2),N=f(s);j(N,{get label(){return h.common.from},withTime:!0,get value(){return e(b)},set value(t){o(b,t,!0)},get timeValue(){return e(O)},set timeValue(t){o(O,t,!0)}});var G=c(N,2);j(G,{get label(){return h.common.until},withTime:!0,withDelete:!0,get value(){return e(y)},set value(t){o(y,t,!0)},get timeValue(){return e(_)},set timeValue(t){o(_,t,!0)}}),m(s);var V=c(s,2),q=f(V),H=f(q);F(H,{get ariaLabel(){return h.events.eventLevel},options:ee,borderless:!0,get value(){return e(w)},set value(t){o(w,t,!0)}}),m(q);var S=c(q,2),J=f(S);F(J,{get ariaLabel(){return h.events.eventType},options:P,borderless:!0,get value(){return e(g)},set value(t){o(g,t,!0)}}),m(S),m(V);var K=c(V,2);{var M=t=>{var d=ne();x(t,d)},Q=t=>{var d=ve();$(d,21,()=>e(p),I=>I.id,(I,U)=>{te(I,{get event(){return e(U)},inline:!0})}),m(d),x(t,d)};Z(K,t=>{e(p).length===0?t(M):t(Q,!1)})}m(n),x(a,n)}}),X()}function Oe(L){me(L,{})}export{Oe as component};
