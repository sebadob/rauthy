import{t as T,a as g,e as Q}from"../chunks/DVyqXkF9.js";import{p as z,a6 as j,a as G,f as M,l as o,k as c,j as e,s as y,t as E,c as I,a4 as U,r as $,a2 as D,a5 as Y,a1 as ae}from"../chunks/DXTz3Rbt.js";import{s as B}from"../chunks/BLUcFBb0.js";import{i as k}from"../chunks/Dnzfvyee.js";import{e as oe}from"../chunks/Dus-q-Em.js";import{u as V}from"../chunks/T3uKKWzz.js";import{B as se}from"../chunks/CVyulMm_.js";import{C as ne}from"../chunks/CL_mTQmm.js";import{N as le}from"../chunks/NPevBcaT.js";import{N as ie}from"../chunks/x_khJbtH.js";import{O as ue}from"../chunks/99krErCG.js";import{b as de,d as ve,c as me,f as ce}from"../chunks/QS8tP13U.js";import{u as fe}from"../chunks/Cg_pJWW9.js";import{B as Z}from"../chunks/BaLU91-Z.js";import{I as K}from"../chunks/DVvDmFQc.js";import{d as ee,e as te}from"../chunks/DzmDou2k.js";import{F as re}from"../chunks/BHicDA9d.js";import{u as X}from"../chunks/pXVVLMtZ.js";import{T as ge}from"../chunks/Uvg4PFWU.js";import{I as _e}from"../chunks/COZs6rVX.js";var he=T('<div class="err"> </div>'),pe=T("<!> <!> <!> <!>",1),be=T('<div class="container svelte-s1196z"><!></div>');function xe(w,r){z(r,!0);let P=X(),u=V(),i=c(void 0),s=c(""),n=c(""),m=c("");j(()=>{requestAnimationFrame(()=>{e(i)?.focus()})});async function h(A,d){if(r.attrs.find(S=>S.name===e(n))){o(s,u.common.nameExistsAlready,!0);return}o(s,"");let t={name:e(n),desc:e(m)||void 0},v=await de(A.action,t);v.body?r.onSave(v.body.name):o(s,v.error?.message||"Error",!0)}var p=be(),x=I(p);re(x,{action:"/auth/v1/users/attr",onSubmit:h,children:(A,d)=>{var t=pe(),v=M(t);K(v,{autocomplete:"off",get label(){return u.attrs.name},get placeholder(){return u.attrs.name},required:!0,pattern:ee,get ref(){return e(i)},set ref(_){o(i,_,!0)},get value(){return e(n)},set value(_){o(n,_,!0)}});var S=y(v,2);K(S,{autocomplete:"off",get label(){return u.attrs.desc},get placeholder(){return u.attrs.desc},pattern:te,get value(){return e(m)},set value(_){o(m,_,!0)}});var C=y(S,2);Z(C,{type:"submit",children:(_,l)=>{U();var a=Q();E(()=>B(a,P.common.save)),g(_,a)},$$slots:{default:!0}});var R=y(C,2);{var q=_=>{var l=he(),a=I(l,!0);$(l),E(()=>B(a,e(s))),g(_,l)};k(R,_=>{e(s)&&_(q)})}g(A,t)},$$slots:{default:!0}}),$(p),g(w,p),G()}var Ae=T('<div class="err"> </div>'),ye=T('<!> <!> <div class="flex gap-05"><!> <!></div> <!>',1);function Te(w,r){z(r,!0);let P=X(),u=V(),i=c(""),s=c(!1),n=c(D(r.attr.name)),m=c(D(r.attr.desc));j(()=>{r.attr.name&&(o(n,r.attr.name,!0),o(m,r.attr.desc,!0))});async function h(x,A){if(o(i,""),e(n)!==r.attr.name&&r.attrs.find(v=>v.name===e(n))){o(i,u.common.nameExistsAlready,!0);return}let d={name:e(n),desc:e(m)||void 0},t=await ve(x.action,d);t.error?o(i,t.error.message,!0):(o(s,!0),r.onSave(),setTimeout(()=>{o(s,!1)},2e3))}const p=Y(()=>`/auth/v1/users/attr/${r.attr.name}`);re(w,{get action(){return e(p)},onSubmit:h,children:(x,A)=>{var d=ye(),t=M(d);K(t,{autocomplete:"off",get label(){return u.attrs.name},get placeholder(){return u.attrs.name},width:"14.5rem",required:!0,pattern:ee,get value(){return e(n)},set value(a){o(n,a,!0)}});var v=y(t,2);K(v,{autocomplete:"off",get label(){return u.attrs.desc},get placeholder(){return u.attrs.desc},width:"14.5rem",pattern:te,get value(){return e(m)},set value(a){o(m,a,!0)}});var S=y(v,2),C=I(S);Z(C,{type:"submit",children:(a,b)=>{U();var f=Q();E(()=>B(f,P.common.save)),g(a,f)},$$slots:{default:!0}});var R=y(C,2);{var q=a=>{_e(a,{})};k(R,a=>{e(s)&&a(q)})}$(S);var _=y(S,2);{var l=a=>{var b=Ae(),f=I(b,!0);$(b),E(()=>B(f,e(i))),g(a,b)};k(_,a=>{e(i)&&a(l)})}g(x,d)},$$slots:{default:!0}}),G()}var Se=T('<div class="err"> </div>'),we=T("<p> </p> <!> <!>",1);function Pe(w,r){z(r,!0);let P=X(),u=V(),i=c("");async function s(){o(i,"");let d=await me(`/auth/v1/users/attr/${r.attr.name}`);d.error?o(i,d.error.message,!0):r.onSave()}var n=we(),m=M(n),h=I(m,!0);$(m);var p=y(m,2);Z(p,{level:-1,onclick:s,children:(d,t)=>{U();var v=Q();E(()=>B(v,P.common.delete)),g(d,v)},$$slots:{default:!0}});var x=y(p,2);{var A=d=>{var t=Se(),v=I(t,!0);$(t),E(()=>B(v,e(i))),g(d,t)};k(x,d=>{e(i)&&d(A)})}E(()=>B(h,u.attrs.delete1)),g(w,n),G()}var Ce=T('<div class="flex"><!></div> <!>',1);function Ne(w,r){z(r,!0);let P=X(),u=V();const i=[u.nav.config,P.common.delete];let s=c(D(i[0])),n=c(void 0);j(()=>{r.attr.name&&requestAnimationFrame(()=>{e(n)?.()})});var m=Ce(),h=M(m),p=I(h);ge(p,{tabs:i,get selected(){return e(s)},set selected(t){o(s,t,!0)},get focusFirst(){return e(n)},set focusFirst(t){o(n,t,!0)}}),$(h);var x=y(h,2);{var A=t=>{Te(t,{get attr(){return r.attr},get attrs(){return r.attrs},get onSave(){return r.onSave}})},d=(t,v)=>{{var S=C=>{Pe(C,{get attr(){return r.attr},get onSave(){return r.onSave}})};k(t,C=>{e(s)===P.common.delete&&C(S)},v)}};k(x,t=>{e(s)===u.nav.config?t(A):t(d,!1)})}g(w,m),G()}var Fe=T('<div class="attrsList svelte-58wsei"></div>'),Oe=T("<!> <!>",1),$e=T('<div class="err"> </div>'),Ee=T('<!> <div id="groups"><!></div>',1),Be=T("<!> <!>",1);function Ie(w,r){z(r,!0);let P=V(),u=c(void 0),i=c(""),s=c(D([])),n=c(D([])),m=c(void 0),h=fe("an");const p=[P.common.name];let x=c(D(p[0])),A=c("");const d=[P.common.name];ae(()=>{t()}),j(()=>{o(m,e(s).find(l=>l.name===h.get()),!0)}),j(()=>{let l=e(A).toLowerCase();l?e(x)===p[0]&&o(n,e(s).filter(a=>a.name?.toLowerCase().includes(l)),!0):o(n,e(s),!0)});async function t(){let l=await ce("/auth/v1/users/attr");l.body?o(s,l.body.values,!0):o(i,l.error?.message||"Error",!0)}function v(l,a){let b=a==="up";l===d[0]&&e(s).sort((f,N)=>b?f.name.localeCompare(N.name):N.name.localeCompare(f.name))}function S(){t()}async function C(l){e(u)?.(),await t(),h.set(l)}var R=Be(),q=M(R);ie(q,{paddingTop:"2.1rem",buttonTilesAriaControls:"groups",width:"min(20rem, 100dvw)",thresholdNavSub:700,buttonTiles:a=>{var b=Fe();oe(b,21,()=>e(n),f=>f.name,(f,N,L,W)=>{const F=Y(()=>h.get()===e(N).name);le(f,{onclick:()=>h.set(e(N).name),get selected(){return e(F)},children:(O,H)=>{U();var J=Q();E(()=>B(J,e(N).name)),g(O,J)}})}),$(b),g(a,b)},children:(a,b)=>{var f=Oe(),N=M(f);const L=Y(()=>e(s).length===0?1:2);se(N,{get level(){return e(L)},alignRight:!0,get closeModal(){return e(u)},set closeModal(F){o(u,F,!0)},children:(F,O)=>{xe(F,{onSave:C,get attrs(){return e(s)}})},$$slots:{default:!0}});var W=y(N,2);ue(W,{searchOptions:p,orderOptions:d,onChangeOrder:v,searchWidth:"min(19.5rem, 100dvw - .5rem)",get searchOption(){return e(x)},set searchOption(F){o(x,F,!0)},get value(){return e(A)},set value(F){o(A,F,!0)}}),g(a,f)},$$slots:{buttonTiles:!0,default:!0}});var _=y(q,2);ne(_,{children:(l,a)=>{var b=Ee(),f=M(b);{var N=O=>{var H=$e(),J=I(H,!0);$(H),E(()=>B(J,e(i))),g(O,H)};k(f,O=>{e(i)&&O(N)})}var L=y(f,2),W=I(L);{var F=O=>{Ne(O,{get attr(){return e(m)},get attrs(){return e(s)},onSave:S})};k(W,O=>{e(m)&&O(F)})}$(L),g(l,b)}}),g(w,R),G()}function tt(w){Ie(w,{})}export{tt as component};
